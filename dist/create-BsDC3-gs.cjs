"use strict";var ee=Object.defineProperty;var se=(n,t,e)=>t in n?ee(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var o=(n,t,e)=>(se(n,typeof t!="symbol"?t+"":t,e),e);const r=require("vue"),l=require("./Icons-CZDOxTxh.cjs"),g=require("./EventItem-_08ehIqX.cjs");class ie{constructor(t={},e){this.components=t,this.modification=e}is(t){return t in this.components}get(t){var e;return(e=this.components)==null?void 0:e[t]}getModification(t,e){var s;if(t){const i=g.getRef((s=this.modification)==null?void 0:s[t]);if(i&&l.isObjectNotArray(i)){const a={};return l.forEach(i,(h,c)=>{a[c]=g.getRef(h)}),e&&Object.assign(a,e),a}}return e}render(t,e,s,i){const a=this.renderOne(t,e,s,i);return a?[a]:[]}renderOne(t,e,s,i){if(this.is(t)){const a=i??t;return g.render(this.get(t),this.getModification(a,e),s,a)}}renderAdd(t,e,s,i,a){return t.push(...this.render(e,s,i,a)),this}}class y{constructor(t,e,s){o(this,"name");o(this,"element",r.ref());o(this,"refs");o(this,"components");o(this,"emits");o(this,"classes");o(this,"classesSub");o(this,"styles");o(this,"stylesSub");o(this,"attrs");o(this,"slots");o(this,"data");o(this,"dataExpose");this.props=e,this.name=this.initName(t),this.refs=this.props?r.toRefs(this.props):{},this.components=new ie(s==null?void 0:s.components,s==null?void 0:s.compMod),this.emits=s==null?void 0:s.emits,this.classes=s==null?void 0:s.classes,this.styles=s==null?void 0:s.styles,this.attrs=r.useAttrs(),this.slots=r.useSlots()}init(){return this.makeOptions(),this.classesSub=r.computed(()=>this.initClasses()),this.stylesSub=r.computed(()=>this.initStyles()),this.data={name:this.getName(),element:this.element,classes:r.computed(()=>this.updateClasses()),styles:r.computed(()=>this.updateStyles()),...this.initSetup()},this.dataExpose=this.initExpose(),this}getName(){return this.name.join("-")}getSubClass(t){return`${this.getName()}__${l.toArray(t).join("__")}`}getStatusClass(t){return`${this.getName()}--${l.toArray(t).join("--")}`}getStyle(t){return`--${this.getName()}-sys-${l.toArray(t).join("-")}`}getAttrs(){const t={...this.attrs??{}};return"class"in t&&delete t.class,"style"in t&&delete t.style,t}setup(){return this.data??{}}expose(){return this.dataExpose??{}}render(){return()=>this.initRender()}initSlot(t,e,s={}){var i;if(this.slots&&((i=this.slots)!=null&&i[t])&&typeof this.slots[t]=="function"){const a=this.slots[t](s);return e&&e.push(a),a}}toClassName(t){if(l.isObject(t)){const e={};return l.forEach(t,(s,i)=>{i.match(/\?\?/)?e[i.replace(/\?\?/,this.getName())]=s:i.match(/\?/)?e[i.replace(/\?/,this.name[0])]=s:e[i]=s}),e}return{}}initName(t){return l.forEach(t.split(".",2),e=>g.toCamelCase(e))}updateClasses(){var s,i;const t=(s=this.classesSub)==null?void 0:s.value,e=(i=this.classes)==null?void 0:i.value;return t&&e?{...t,...e,main:{...this.toClass(t==null?void 0:t.main),...this.toClass(e==null?void 0:e.main)}}:e??{main:{}}}updateStyles(){var s,i;const t=(s=this.stylesSub)==null?void 0:s.value,e=(i=this.styles)==null?void 0:i.value;return t&&e?{...t,...e}:e??{}}toClass(t){return l.isObjectNotArray(t)?t:Array.isArray(t)?{[t.filter(s=>typeof s=="string"&&s.trim()!=="").join(" ")]:!0}:typeof t=="string"?{[t]:!0}:{}}}class ne{constructor(t,e="is-icon",s="is-icon-active"){this.props=t,this.classIcon=e,this.classIconActive=s}isActive(){var t,e;return!!((t=this.props)!=null&&t.active&&((e=this.props)!=null&&e.iconActive))}getIconBind(){var t,e,s;if((t=this.props)!=null&&t.icon)return g.getBind(this.props.icon,{class:this.classIcon,turn:(e=this.props)==null?void 0:e.turn,disabled:(s=this.props)==null?void 0:s.disabled,hide:this.isActive()})}getIconActiveBind(){var t,e,s;if((t=this.props)!=null&&t.iconActive)return g.getBind(this.props.iconActive,{class:this.classIconActive,turn:(e=this.props)==null?void 0:e.turn,disabled:(s=this.props)==null?void 0:s.disabled,hide:!this.isActive()})}}class re{constructor(t,e="is-icon",s="is-icon-active"){o(this,"item");o(this,"active",r.computed(()=>this.item.isActive()));o(this,"iconBind",r.computed(()=>this.item.getIconBind()));o(this,"iconActiveBind",r.computed(()=>this.item.getIconActiveBind()));this.item=new ne(t,e,s)}}class U extends y{constructor(e,s,i){super(e,s,i);o(this,"icon");o(this,"onLoad",e=>{var s;return(s=this.emits)==null?void 0:s.call(this,"load",e)});this.icon=new re(this.props,this.getSubClass("icon"),this.getSubClass("iconActive")),this.init()}makeOptions(){return this}initSetup(){return{iconBind:this.icon.iconBind,iconActiveBind:this.icon.iconActiveBind,isActive:this.icon.active}}initExpose(){return{isActive:this.setup().isActive}}initClasses(){return{main:{}}}initStyles(){return{}}initRender(){var i,a;const e=this.setup(),s=[];return this.initSlot("default",s),this.components.is("image")&&((i=this.props)!=null&&i.icon&&this.components.renderAdd(s,"image",{...e.iconBind.value,onLoad:this.onLoad},void 0,"icon"),(a=this.props)!=null&&a.iconActive&&this.components.renderAdd(s,"image",{...e.iconActiveBind.value,onLoad:this.onLoad},void 0,"iconActive")),r.h("span",{...this.getAttrs(),ref:this.element,class:e.classes.value.main},s)}}const F={animationType:"type1"},G={icon:[String,Object],iconActive:[String,Object],active:Boolean,turn:Boolean,disabled:Boolean,hide:Boolean,animationType:{type:String,default:F==null?void 0:F.animationType},animationShow:Boolean,overlay:Boolean,dynamic:Boolean,start:Boolean,end:Boolean,high:Boolean},Q={animationType:["type1","type2"],rounded:["none","standard","sm","md","lg","xl","full"],size:["xs","sm","md","lg","xl"]},Z={...F,animationType:"type1"},ae={...G,turn:Boolean,disabled:Boolean,hide:Boolean,animationType:{type:String,default:Z==null?void 0:Z.animationType},animationShow:Boolean,overlay:Boolean,dynamic:Boolean,start:Boolean,end:Boolean,high:Boolean,rounded:String,size:String};class oe{constructor(t,e=Object.keys(t)){o(this,"cache",{});this.props=t,this.watch=e}is(t){return l.isArray(t)?!!t.find(e=>this.isDifferent(e)):this.isDifferent(t)}isChanged(){const t=this.props;return!!this.watch.find(e=>e in t&&this.isDifferent(e))}update(){const t=this.props;this.watch.forEach(e=>{e in t&&this.isDifferent(e)&&(this.cache[e]=t[e])})}isDifferent(t){var e,s;return((e=this.cache)==null?void 0:e[t])!==((s=this.props)==null?void 0:s[t])}}class he{constructor(t,e,s){o(this,"event",{});o(this,"changed");this.props=t,this.callback=e,this.changed=new oe(t,s)}make(t){return this.makeCallback(t),this}is(t){return t in this.props}isChanged(t,e){return!(t in this.event)||this.changed.is(e||t)}makeCallback(t=!1){(t||this.changed.isChanged())&&(this.initEvent(),this.makeCallbackItem(),this.changed.update())}makeCallbackItem(){this.callback&&this.callback(this.event)}}class ot extends he{make(t){return this.makeCallback(t).then(),this}async makeCallback(t){(t||this.changed.isChanged())&&(await this.initEvent(),this.makeCallbackItem(),this.changed.update())}}var f=(n=>(n.file="file",n.image="image",n.color="color",n.public="public",n.filled="filled",n.outlined="outlined",n.round="round",n.sharp="sharp",n.twoTone="two-tone",n.material="material",n.icon="icon",n))(f||{});class ce extends g.CacheItem{constructor(t){super(()=>this.update()),this.props=t}get(){var t;return this.getCache([(t=this.props)==null?void 0:t.value])}update(){var e;const t=(e=this.props)==null?void 0:e.value;if(t){if(t instanceof File)return f.file;if(t.match(/\//))return f.image;if(t.match(l.GEO_FLAG_ICON_NAME))return f.icon;if(t.match(/^#/))return f.color;if(t.match(/^@/))return f.public;if(t.match(/^\$/))return f.material;const s=t.match(/^(filled|outlined|round|sharp|two-tone)-/);return s?s[1]:l.Icons.is(t)?f.public:f.material}}}const le=720;class ue{static isImage(t){return!!t.type.match(/^image\//)}static createImage(t){return new Promise(e=>{if(t){const s=new Image;s.onerror=()=>e(void 0),s.onload=()=>{e({image:s,src:this.getSRC(s,t),width:s.naturalWidth,height:s.naturalHeight})},(async()=>s.src=t instanceof File?await this.getFileResult(t):t)()}else e(void 0)})}static getPath(t){return this.createImage(t).then(e=>(e==null?void 0:e.src)??"")}static getSRC(t,e,s=le){var i;if((e instanceof File||e===void 0)&&(t.naturalHeight>s||t.naturalWidth>s)){const a=t.naturalWidth>=t.naturalHeight,h=(i=document.createElement("canvas"))==null?void 0:i.getContext("2d");return h?(h.canvas.width=a?s:t.naturalWidth/t.naturalHeight*s,h.canvas.height=a?t.naturalHeight/t.naturalWidth*s:s,h.drawImage(t,0,0,h.canvas.width,h.canvas.height),h.canvas.toDataURL()):""}else return t.src}static getFileResult(t){return new Promise(e=>{if(this.isImage(t)){const s=new FileReader;s.onload=()=>e(typeof s.result=="string"?s.result:""),s.readAsDataURL(t)}else e("")})}}class de extends ot{constructor(e,s,i){var a;super(e,i,["value","url"]);o(this,"item");this.type=s,(a=this.props)!=null&&a.value&&this.make()}is(){return this.getImage()!==void 0}isLink(){return this.is()&&typeof this.getImage()=="string"}isImage(){return this.is()&&typeof this.getImage()!="string"}getImage(){var e;return(e=this.event)==null?void 0:e.image}async initEvent(){this.isChanged("image",["value","url"])&&(this.event.image=await this.initImage())}async initImage(){var s,i;const e=(s=this.props)==null?void 0:s.value;if(e)switch(this.type.get()){case f.image:case f.file:try{return await ue.createImage(e)}catch{console.error(Image,e)}break;case f.public:case f.icon:if(l.isString(e))return await l.Icons.get(e,(i=this.props)==null?void 0:i.url);break}}}class ge{constructor(t){this.props=t}is(){var e;const t=(e=this.props)==null?void 0:e.coordinator;return l.isArray(t)&&t.length>0&&t.length<5}get(){const t=this.getCoordinator();return{width:100-t[1]-t[3],height:100-t[2]-t[0]}}getCoordinator(){var t;if(this.is()){const e=(t=this.props)==null?void 0:t.coordinator;switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e}}return[0,0,0,0]}getSize(){const t=this.get();return{width:`${100/t.width*100}%`,height:`${100/t.height*100}%`}}}class pe{constructor(t,e){this.props=t,this.coordinator=e}getX(){var t,e;return this.coordinator.is()?`${this.coordinator.getCoordinator()[3]+this.coordinator.get().width/2}%`:((e=(t=this.props)==null?void 0:t.x)==null?void 0:e.toString())||"center"}getY(){var t,e;return this.coordinator.is()?`${this.coordinator.getCoordinator()[0]+this.coordinator.get().height/2}%`:((e=(t=this.props)==null?void 0:t.y)==null?void 0:e.toString())||"center"}}class me{constructor(t){o(this,"factorMax",1);o(this,"size",{width:0,height:0});o(this,"offset",{width:7680,height:7680});this.name=t}is(t){return this.name===t}isSize(){return!!(this.size.width||this.size.width)}getWidth(){return this.size.width}getHeight(){return this.size.height}getOffsetWidth(){return this.offset.width}getOffsetHeight(){return this.offset.height}getFactorMax(){return this.factorMax}makeWidth(t){return t>this.size.width&&(this.size.width=t),this}makeHeight(t){return t>this.size.height&&(this.size.height=t),this}makeOffsetWidth(t){return t<this.offset.width&&(this.offset.width=t),this}makeOffsetHeight(t){return t<this.offset.height&&(this.offset.height=t),this}makeFactorMax(t){return t<this.factorMax&&(this.factorMax=t),this}reset(){return this.factorMax=1,this.size={width:0,height:0},this.offset={width:7680,height:7680},this}}class L{static isSize(){return this.items.find(t=>t.isSize())!==void 0}static get(t){return this.find(t)||this.init(t)}static reset(){this.items.forEach(t=>t.reset())}static find(t){return this.items.find(e=>e.is(t))}static init(t){const e=new me(t);return this.items.push(e),e}}o(L,"items",[]);class w{static is(t){return this.objects.findIndex(e=>e===t)!==-1}static add(t){this.is(t)||(this.objects.push(t),this.make())}static remove(t){const e=this.objects.findIndex(s=>s===t);e!==-1&&(this.objects.splice(e,1),this.cache=[]),this.make()}static reset(){this.cache=[],this.start()}static make(){this.event&&this.objects.length<1?(this.event.stop(),this.event=void 0):this.objects.length>0&&(this.event=new g.EventItem(window,["scroll-sync"],()=>this.start()).start(),this.start())}static getItemIdByVisible(){const t=[];return this.objectsAdaptive.forEach(e=>{e.isVisible()&&t.push(e.getId())}),t}static start(){var t;if(this.isAdaptive()){this.makeAdaptive();const e=this.getItemIdByVisible();this.isCache(e)&&(this.cache=e,this.makeSize(),this.makePercent(),this.makeFactorMax(),this.makeCallback())}else(t=this.event)==null||t.stop()}static makeAdaptive(){this.objectsAdaptive=[],this.objects.forEach(t=>{t.make(),t.isBeyond()&&this.objectsAdaptive.push(t)})}static makeSize(){L.reset(),this.objectsAdaptive.forEach(t=>{const e=t.getElement();e&&t.isVisible()&&L.get(t.getGroup()).makeWidth(t.getWidth()).makeHeight(t.getHeight()).makeOffsetWidth(e.offsetWidth).makeOffsetHeight(e.offsetHeight)})}static makePercent(){L.isSize()&&this.objectsAdaptive.forEach(t=>{const e=t.getElement(),s=L.get(t.getGroup());if(e){const i=s.getWidth(),a=s.getHeight();t.setPercent(t.getWidth()*(i?1/i:0)*(s.getOffsetWidth()/e.offsetWidth),t.getHeight()*(a?1/a:0)*(s.getOffsetHeight()/e.offsetHeight))}})}static makeFactorMax(){L.isSize()&&this.objectsAdaptive.forEach(t=>{t.isVisible()&&L.get(t.getGroup()).makeFactorMax(t.getFactor())})}static makeCallback(){this.objectsAdaptive.forEach(t=>{t.makeCallback()})}static isAdaptive(){return!!this.objects.find(t=>t.is())}static isCache(t){return this.cache.join("|")!==t.join("|")}}o(w,"objects",[]),o(w,"objectsAdaptive",[]),o(w,"cache",[]),o(w,"event"),o(w,"time");const fe="main",pt=256;class ye{constructor(t,e,s,i){o(this,"percent",{width:0,height:0});o(this,"beyond",!1);o(this,"visible",!1);this.props=t,this.data=e,this.element=s,this.callback=i,this.reset()}is(){var t;return!!((t=this.props)!=null&&t.adaptive)&&this.data.isImage()&&!!(this.element.value&&this.element.value.closest("body")&&(this.getWidth()||this.getHeight()))}isGroup(t){return this.getGroup()===t}isBeyond(){return this.beyond}isVisible(){return this.visible}getGroup(){var t;return((t=this.props)==null?void 0:t.adaptiveGroup)??fe}getId(){return g.getElementId(this.element.value)}getElement(){return this.element.value}getWidth(){var t;return l.toNumber(((t=this.props)==null?void 0:t.objectWidth)??0)}getHeight(){var t;return l.toNumber(((t=this.props)==null?void 0:t.objectHeight)??0)}getType(){if(this.getWidth()&&this.percent.width>0)return"x";if(this.getHeight()&&this.percent.height>0)return"y"}getSize(){if(this.element.value&&this.data.isImage()){const t=this.data.getImage();switch(this.getType()){case"x":return t.height*(this.element.value.offsetWidth*this.percent.width/t.width);case"y":return t.width*(this.element.value.offsetHeight*this.percent.height/t.height)}}return 0}getFactor(){const t=this.element.value,e=this.getSize(),s=this.getType();if(t){if(s==="x"&&e>t.offsetHeight)return t.offsetHeight/e;if(s==="y"&&e>t.offsetWidth)return t.offsetWidth/e}return 1}getBackgroundSize(){const t=L.get(this.getGroup()).getFactorMax();switch(this.getType()){case"x":return`${100*this.percent.width*t}% auto`;case"y":return`auto ${100*this.percent.height*t}%`}return null}setPercent(t,e){return this.percent.width=t,this.percent.height=e,this}update(){this.is()?w.add(this):w.remove(this)}reset(){this.is()&&(w.is(this)?w.reset():w.add(this))}remove(){this.is()&&w.remove(this)}make(){var t,e;if(this.beyond=!1,this.visible=!1,this.is())if((t=this.props)!=null&&t.adaptiveAlways)this.beyond=!0,this.visible=!0;else{const s=(e=this.element.value)==null?void 0:e.getBoundingClientRect();s&&(this.beyond=!(s.bottom<0-pt||s.top>window.innerHeight+pt),this.visible=!(s.bottom<0||s.top>window.innerHeight))}return this}makeCallback(){var t;return(t=this.callback)==null||t.call(this),this}}class be{constructor(t,e,s,i){this.props=t,this.data=e,this.coordinator=s,this.adaptive=i}get(){if(this.coordinator.is())return this.getSizeByCoordinator();if(this.adaptive.is()){const t=this.adaptive.getBackgroundSize();if(t)return t.toString()}return this.getSizeForItem()}getImage(){const t=this.data.getImage();switch(typeof t){case"string":return`url("${t}")`;case"object":return`url("${t.src}")`;default:return null}}getSize(t,e){const s=this.data.getImage();return typeof s=="object"?s.height<s.width?`auto ${e}`:`${t} auto`:null}getSizeByCoordinator(){const{width:t,height:e}=this.coordinator.getSize();return this.getSize(t,e)}getSizeForItem(){var e;const t=(e=this.props)==null?void 0:e.size;return t&&l.isFilled(t)?t.toString().match(/%$/)?this.getSize(t,t):t.toString():null}}let ve=class extends ot{constructor(e,s,i){super(e,i);o(this,"type");o(this,"data");o(this,"coordinator");o(this,"position");o(this,"adaptiveItem");o(this,"background");this.props=e,this.callback=i,this.type=new ce(e),this.data=new de(e,this.type,()=>{this.adaptiveItem.is()?this.adaptiveItem.reset():this.make(!0)}),this.coordinator=new ge(e),this.position=new pe(e,this.coordinator),this.adaptiveItem=new ye(e,this.data,s,()=>this.make(!0)),this.background=new be(e,this.data,this.coordinator,this.adaptiveItem)}destructor(){this.adaptiveItem.remove()}getType(){return this.type.get()}getValue(){var e;return(e=this.props)==null?void 0:e.value}getData(){return this.data}getText(){const e=this.type.get(),s=this.getValue();if(e&&l.isString(s)&&["filled","outlined","round","sharp","two-tone","material"].indexOf(e)!==-1)return s.replace(/^(filled|outlined|round|sharp|two-tone)-/,"")}getClasses(){const e=this.type.get(),s={[`??--type--${e}`]:e!==void 0,notranslate:!0};switch(e){case"filled":case"outlined":case"round":case"sharp":case"two-tone":case"material":s["material-icons"]=!0;break}return s}getStyles(){var e;return((e=this.event)==null?void 0:e.styles)||{}}updateAdaptive(){return this.adaptiveItem.update(),this.make(!0),this}async initEvent(){this.isChanged("image",["value","url"])&&(this.event.image=this.getData().getImage()),this.event.styles=this.initStyles()}initStyles(){var s,i;const e=this.getValue();if(e)switch(this.type.get()){case"file":case"image":return{"background-size":this.background.get(),"background-position-x":(s=this.position)==null?void 0:s.getX(),"background-position-y":(i=this.position)==null?void 0:i.getY()};case"icon":return{"background-image":this.background.getImage()};case"public":return{"mask-image":this.background.getImage()};case"color":if(l.isString(e))return{"background-color":e}}return{}}};class ke{constructor(t,e){o(this,"item");o(this,"type",r.computed(()=>this.item.getType()));o(this,"data",r.shallowRef());o(this,"text",r.computed(()=>this.item.getText()));o(this,"classes",r.computed(()=>this.item.getClasses()));o(this,"styles",r.shallowRef());this.item=new ve(t,e,s=>{this.data.value=s.image,this.styles.value=s.styles}),r.watchEffect(()=>this.item.data.make(!0)),r.watchEffect(()=>this.item.updateAdaptive())}destructor(){this.item.destructor()}}class X extends y{constructor(e,s,i){super(e,s,i);o(this,"image");this.image=new ke(this.props,this.element),this.init(),r.onUnmounted(()=>this.image.destructor()),r.watch(this.image.data,a=>{var h;return(h=this.emits)==null?void 0:h.call(this,"load",{type:this.image.type.value,image:a})})}makeOptions(){return this}initSetup(){return{type:this.image.type,data:this.image.data,text:this.image.text}}initExpose(){const e=this.setup();return{type:e.type,data:e.data}}initClasses(){return{main:{...this.toClassName(this.image.classes.value)}}}initStyles(){return{...this.image.styles.value}}initRender(){const e=this.setup();return r.h("span",{ref:this.element,class:e.classes.value.main,style:e.styles.value,translate:"no"},e.text.value)}}const Ce={adaptiveGroup:"basic"},J={value:[String,File],coordinator:Array,size:String,x:[String,Number],y:[String,Number],adaptiveGroup:{type:String,default:Ce.adaptiveGroup},adaptiveAlways:Boolean,objectWidth:[String,Number],objectHeight:[String,Number],url:String,turn:Boolean,disabled:Boolean,hide:Boolean,adaptive:Boolean},we={...J,turn:Boolean,disabled:Boolean,hide:Boolean,adaptive:Boolean},wt=r.defineComponent({name:"M2Image",__name:"M2Image",props:{...we},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m2-image":!0,"m2-image--turn":i.turn,"m2-image--disabled":i.disabled,"m2-image--hide":i.hide,"m2-image--adaptive":i.adaptive}})),h=r.computed(()=>({})),c=new X("m2.image",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),Be=r.defineComponent({name:"M2Icon",__name:"M2Icon",props:{...ae},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m2-icon":!0,"m2-icon--turn":i.turn,"m2-icon--disabled":i.disabled,"m2-icon--hide":i.hide,[`m2-icon--animationType--${i.animationType}`]:l.inArray(Q.animationType,i.animationType),"m2-icon--animationShow":i.animationShow,"m2-icon--overlay":i.overlay,"m2-icon--dynamic":i.dynamic,"m2-icon--start":i.start,"m2-icon--end":i.end,"m2-icon--high":i.high,[`m2-icon--rounded--${i.rounded}`]:l.inArray(Q.rounded,i.rounded),[`m2-icon--size--${i.size}`]:l.inArray(Q.size,i.size)}})),h=r.computed(()=>({})),c=new U("m2.icon",i,{emits:s,components:{image:wt},classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}});class Se{constructor(t,e,s="is-item",i="is-end",a="x",h="y"){this.props=t,this.element=e,this.classItem=s,this.classEnd=i,this.styleX=a,this.styleY=h}onClick(t){this.addItem(t.offsetX,t.offsetY)}setElement(t){return this.element=t,this}addItem(t,e){var s;this.element&&!((s=this.props)!=null&&s.disabled)&&g.createElement(this.element,"span",i=>{i.onanimationend=()=>i.classList.add(this.classEnd),i.ontransitionend=()=>{var a;return(a=i.parentElement)==null?void 0:a.removeChild(i)},i.style.setProperty(this.styleX,`${t}px`),i.style.setProperty(this.styleY,`${e}px`),i.classList.add(this.classItem)})}}class Ie{constructor(t,e,s="is-item",i="is-end",a="x",h="y"){o(this,"ripple");o(this,"onClick");this.ripple=new Se(t,e.value,s,i,a,h),r.watch(e,c=>this.ripple.setElement(c)),this.onClick=c=>this.ripple.onClick(c)}}class Bt extends y{constructor(e,s,i){super(e,s,i);o(this,"ripple");this.ripple=new Ie(s,this.element,this.getSubClass("item"),this.getStatusClass("end"),this.getStyle("x"),this.getStyle("y")),this.init()}makeOptions(){return this}initSetup(){return{onClick:this.ripple.onClick}}initExpose(){return{}}initClasses(){return{main:{},item:this.getSubClass("item")}}initStyles(){return{}}initRender(){const e=this.setup();return r.h("div",{ref:this.element,class:e.classes.value.main,onMousedown:e.onClick})}}const St={disabled:Boolean},xe={...St},Me=r.defineComponent({name:"M2Ripple",__name:"M2Ripple",props:{...xe},setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m2-ripple":!0}})),h=r.computed(()=>({})),c=new Bt("m2.ripple",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),ht={label:[String,Number]},It=function(n,t,e="is-label"){const s=r.computed(()=>!!(n!=null&&n.label||t&&"default"in t));return{isLabel:s,renderLabel(){var a;const i=[];if(s.value){const h=[];n!=null&&n.label&&h.push(n.label),t&&(t!=null&&t.default)&&h.push((a=t.default)==null?void 0:a.call(t,{})),h.length>0&&i.push(g.render("span",{class:e||"label"},h))}return i}}},Te={icon:[String,Object],selected:Boolean,iconTurn:Boolean,iconHide:Boolean},xt={...Te,iconTrailing:[String,Object]},Ee=function(n,t,e="is-icon",s="is-icon-trailing"){const i=r.computed(()=>g.getBind(n==null?void 0:n.icon,{class:e,active:n==null?void 0:n.selected,turn:!(n!=null&&n.iconTrailing)&&(n==null?void 0:n.iconTurn),hide:n==null?void 0:n.iconHide,animationType:"type2",start:!0,"data-event-type":"icon"},"icon")),a="iconTrailing"in n?r.computed(()=>g.getBind(n.iconTrailing,{class:s,turn:n==null?void 0:n.iconTurn,end:!0,high:!0,"data-event-type":"icon-trailing"},"icon")):void 0,h=r.computed(()=>!!(n!=null&&n.icon||n!=null&&n.iconTrailing));return{iconBind:i,trailingBind:a,isIcon:h,renderIcon(){const c=[];return t&&(n!=null&&n.icon&&t.renderAdd(c,"icon",i.value,void 0,"icon"),a&&(n!=null&&n.iconTrailing)&&t.renderAdd(c,"icon",a.value,void 0,"iconTrailing")),c}}},Mt={progress:[Boolean,Object]},_e=function(n,t,e="is-progress",s){const i=r.computed(()=>g.getBind(n.loading,{class:e,...s},"visible"));return{progressBind:i,renderProgress(){const a=[];return t&&(n!=null&&n.loading)&&t.renderAdd(a,"progress",i.value),a}}},ct={progress:[Object,Boolean],readonly:Boolean,disabled:Boolean},Tt=function(n){const t=()=>!!(n!=null&&n.disabled);return{disabledBind:r.computed(()=>t()||void 0),isEnabled:r.computed(()=>!(n!=null&&n.disabled)&&!(n!=null&&n.readonly)&&!(n!=null&&n.loading)),isReadonly:r.computed(()=>!!(n!=null&&n.readonly)),isDisabled:r.computed(()=>t()),isProgress:r.computed(()=>!!(n!=null&&n.loading))}},Et={to:String,value:[String,Number,Object],detail:[Object]},Ae=function(n,t,e){const s=a=>{var c,u,d;return{type:((d=(u=(c=a.target)==null?void 0:c.closest("[data-event-type]"))==null?void 0:u.dataset)==null?void 0:d.eventType)??"click",value:n==null?void 0:n.value,detail:n==null?void 0:n.detail}},i=()=>!1;return{onClick(a){t.isEnabled.value&&!i()?e==null||e("click",a,s(a)):g.makeStopPropagation(a)}}};class lt extends y{constructor(e,s,i){super(e,s,i);o(this,"icons");this.icons=Ee(this.props,this.components,this.getSubClass("icon"),this.getSubClass("trailing")),this.init()}makeOptions(){return this}initSetup(){const e=Tt(this.props);return{...It(this.props,this.slots,this.getSubClass("label")),...this.icons,..._e(this.props,this.components,this.getSubClass("loading"),{circular:!0,inverse:!0}),...e,...Ae(this.props,e,this.emits)}}initExpose(){return{}}initClasses(){return{main:{[this.getStatusClass("icon")]:this.icons.isIcon.value},label:this.getSubClass("label"),icon:this.getSubClass("icon"),trailing:this.getSubClass("trailing"),loading:this.getSubClass("loading")}}initStyles(){return{}}initRender(){var i;const e=this.setup(),s=[...e.renderProgress(),...e.renderLabel(),...e.renderIcon()];return e.isEnabled.value&&this.components.renderAdd(s,"ripple"),r.h(((i=this.props)==null?void 0:i.tag)||"button",{...this.getAttrs(),ref:this.element,class:e.classes.value.main,style:e.styles.value,disabled:e.disabledBind.value,onClick:e.onClick},s)}}const P={tag:"button"},_t={...ht,...xt,...Mt,...ct,...Et,tag:{type:String,default:P==null?void 0:P.tag},disabled:Boolean,selected:Boolean,loading:Boolean,readonly:Boolean},tt={adaptive:["icon","sm","md"],height:["sm","md","lg"],palette:["primary","secondary","tertiary","red","green","error","neutral","neutralVariant"]},R={...P,height:"md",filled:!0},$e={..._t,focus:Boolean,disabled:Boolean,selected:Boolean,loading:Boolean,readonly:Boolean,adaptive:String,height:{type:String,default:R==null?void 0:R.height},filled:{type:Boolean,default:R==null?void 0:R.filled},outlined:Boolean,text:Boolean,elevated:Boolean,tonal:Boolean,palette:String},Le={...J,turn:Boolean,disabled:Boolean,hide:Boolean,adaptive:Boolean},ut=r.defineComponent({name:"M3Image",__name:"M3Image",props:{...Le},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-image":!0,"m3-image--turn":i.turn,"m3-image--disabled":i.disabled,"m3-image--hide":i.hide,"m3-image--adaptive":i.adaptive}})),h=r.computed(()=>({})),c=new X("m3.image",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),et={animationType:["type1","type2"],rounded:["none","standard","sm","md","lg","xl","2xl","full"],size:["xs","sm","md","lg","xl"]},st={...F,animationType:"type1"},Oe={...G,turn:Boolean,disabled:Boolean,hide:Boolean,animationType:{type:String,default:st==null?void 0:st.animationType},animationShow:Boolean,overlay:Boolean,dynamic:Boolean,start:Boolean,end:Boolean,high:Boolean,rounded:String,size:String},dt=r.defineComponent({name:"M3Icon",__name:"M3Icon",props:{...Oe},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-icon":!0,"m3-icon--turn":i.turn,"m3-icon--disabled":i.disabled,"m3-icon--hide":i.hide,[`m3-icon--animationType--${i.animationType}`]:l.inArray(et.animationType,i.animationType),"m3-icon--animationShow":i.animationShow,"m3-icon--overlay":i.overlay,"m3-icon--dynamic":i.dynamic,"m3-icon--start":i.start,"m3-icon--end":i.end,"m3-icon--high":i.high,[`m3-icon--rounded--${i.rounded}`]:l.inArray(et.rounded,i.rounded),[`m3-icon--size--${i.size}`]:l.inArray(et.size,i.size)}})),h=r.computed(()=>({})),c=new U("m3.icon",i,{emits:s,components:{image:ut},classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}});class Fe extends ot{constructor(e,s){super(e,s,["value","visible"]);o(this,"timeout");o(this,"timeoutReject")}isValue(){return this.getValue()>0}getTag(){var e;return(e=this.props)!=null&&e.circular?"svg":"div"}getValue(){var e;return l.toNumber(((e=this.props)==null?void 0:e.value)??0)}getValueInPercent(){var e;if(this.isValue()){const s=this.getValue(),i=100/this.getMax()*s;return(e=this.props)!=null&&e.circular?i.toString():`${100-i}%`}return null}getMax(){var e;return l.toNumber(((e=this.props)==null?void 0:e.max)??100)}getStyles(){return{"--??-sys-value":this.getValueInPercent()}}onAnimation({animationName:e}){e.match("-hidden")&&(this.event.hide=!1,this.event.classes=this.initClasses(),this.makeCallbackItem())}async initEvent(){this.isChanged("visible")&&([this.event.hide,this.event.visible]=await this.makeVisible()),this.isChanged("classes",["value","visible"])&&(this.event.classes=this.initClasses())}makeVisible(){return new Promise((e,s)=>{var h,c,u;const i=(h=this.props)==null?void 0:h.visible,a=l.toNumber(((c=this.props)==null?void 0:c.delay)??0);clearTimeout(this.timeout),this.isValue()?e([!1,!1]):!!((u=this.event)!=null&&u.visible)!==i&&(i&&a?(this.timeout=setTimeout(()=>{clearTimeout(this.timeoutReject),e(this.initVisible())},a),this.timeoutReject=setTimeout(s,a+1e3)):e(this.initVisible()))})}initVisible(){var s;const e=(s=this.props)==null?void 0:s.visible;return[!e,!!e]}initClasses(){return{"??--hide":this.event.hide,"??--visible":this.event.visible,"??--value":this.isValue()}}}class Re{constructor(t){o(this,"item");o(this,"tag",r.computed(()=>this.item.getTag()));o(this,"valueInPercent",r.computed(()=>this.item.getValueInPercent()));o(this,"hide",r.shallowRef(!1));o(this,"visible",r.shallowRef(!1));o(this,"classes",r.shallowRef({}));o(this,"styles",r.computed(()=>this.item.getStyles()));this.props=t,this.item=new Fe(t,e=>{this.hide.value=e.hide,this.visible.value=e.visible,this.classes.value=e.classes}),r.watchEffect(()=>this.item.make())}onAnimation(t){this.item.onAnimation(t)}}class At extends y{constructor(e,s,i){super(e,s,i);o(this,"item");this.item=new Re(s),this.init()}makeOptions(){return this}initSetup(){return{tag:this.item.tag,valueInPercent:this.item.valueInPercent,hide:this.item.hide,visible:this.item.visible,onAnimation:e=>this.item.onAnimation(e)}}initExpose(){return{}}initClasses(){return{main:{...this.toClassName(this.item.classes.value)},circle:this.getSubClass("circle"),circleSub:this.getSubClass("circleSub")}}initStyles(){return{...this.toClassName(this.item.styles.value)}}initRender(){var i,a;const e=this.setup(),s=[];return(i=this.props)!=null&&i.circular&&(((a=this.props)==null?void 0:a.indeterminate)==="type3"&&s.push(r.h("circle",{class:e.classes.value.circleSub,cx:"24",cy:"24",r:"20"})),s.push(r.h("circle",{class:e.classes.value.circle,cx:"24",cy:"24",r:"20"}))),r.h(e.tag.value,{ref:this.element,class:e.classes.value.main,style:e.styles.value,viewBox:"0 0 48 48",onAnimationend:e.onAnimation},s)}}const m={max:100,delay:360,linear:!0,indeterminate:"type1",position:"top"},$t={value:[Number,String],max:{type:[Number,String],default:m==null?void 0:m.max},visible:Boolean,delay:{type:[Number,String],default:m==null?void 0:m.delay},linear:{type:Boolean,default:m==null?void 0:m.linear},circular:Boolean,indeterminate:{type:String,default:m==null?void 0:m.indeterminate},position:{type:String,default:m==null?void 0:m.position},dense:Boolean,inverse:Boolean},mt={indeterminate:["type1","type2","type3"],position:["top","bottom"]},T={...m,linear:!0,indeterminate:"type1",position:"top"},Ne={...$t,linear:{type:Boolean,default:T==null?void 0:T.linear},circular:Boolean,indeterminate:{type:String,default:T==null?void 0:T.indeterminate},position:{type:String,default:T==null?void 0:T.position},dense:Boolean,inverse:Boolean},gt=r.defineComponent({name:"M3Progress",__name:"M3Progress",props:{...Ne},setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-progress":!0,"m3-progress--linear":i.linear&&!i.circular,"m3-progress--circular":i.circular,[`m3-progress--indeterminate--${i.indeterminate}`]:l.inArray(mt.indeterminate,i.indeterminate),[`m3-progress--position--${i.position}`]:l.inArray(mt.position,i.position),"m3-progress--dense":i.dense,"m3-progress--inverse":i.inverse}})),h=r.computed(()=>({})),c=new At("m3.progress",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),De=r.defineComponent({name:"M3Button",__name:"M3Button",props:{...$e},emits:["click"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-button":!0,"m3-button--focus":i.focus,"m3-button--disabled":i.disabled,"m3-button--selected":i.selected,"m3-button--loading":i.loading,"m3-button--readonly":i.readonly,[`m3-button--adaptive--${i.adaptive}`]:l.inArray(tt.adaptive,i.adaptive),[`m3-button--height--${i.height}`]:l.inArray(tt.height,i.height),"m3-button--filled":i.filled&&!i.outlined&&!i.text&&!i.elevated&&!i.tonal,"m3-button--outlined":i.outlined,"m3-button--text":i.text,"m3-button--elevated":i.elevated,"m3-button--tonal":i.tonal,[`m3-palette--${i.palette}`]:l.inArray(tt.palette,i.palette)}})),h=r.computed(()=>({})),c=new lt("m3.button",i,{emits:s,components:{icon:dt,progress:gt},classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}});class Ve{constructor(t,e,s,i){this.props=t,this.element=e,this.type=s,this.pattern=i}get(){const t=this.element.value;if(t)return"input"in t?t.input:t}getName(){var t;return((t=this.get())==null?void 0:t.name)??""}getPattern(){var t,e,s,i,a,h,c,u,d,p;return{name:(t=this.props)==null?void 0:t.name,type:(e=this.type)==null?void 0:e.get(),required:(s=this.props)==null?void 0:s.required,pattern:(i=this.pattern)==null?void 0:i.get(),step:(a=this.props)==null?void 0:a.step,min:(h=this.props)==null?void 0:h.min,max:(c=this.props)==null?void 0:c.max,minlength:(u=this.props)==null?void 0:u.minlength,maxlength:(d=this.props)==null?void 0:d.maxlength,...((p=this.props)==null?void 0:p.input)??{}}}findByName(t){var i;if(t instanceof Element)return t;const e=(i=this.get())==null?void 0:i.form;if(e){const a=e.querySelector(`[name="${t}"]`);if(a)return a}const s=document.querySelector(t);if(s)return s}clear(){var e;const t=this.element.value;return t&&"clear"in t&&((e=t.clear)==null||e.call(t)),this}}class je extends Ve{constructor(t,e){super(t,e)}getPattern(){var t,e,s;return{name:(t=this.props)==null?void 0:t.name,type:"checkbox",required:(e=this.props)==null?void 0:e.required,...((s=this.props)==null?void 0:s.input)??{}}}}class Pe{constructor(){o(this,"change",!1)}get(){return this.change}set(t){return this.change=t,this}toChange(){return this.set(!0)}reset(){return this.set(!1)}}class He{constructor(t,e,s,i){o(this,"value");o(this,"valueIs",!1);this.props=t,this.element=e,this.change=s,this.callback=i,this.value=this.getOriginal()}is(){var t;return this.valueIs||this.getBoolean()||!!((t=this.props)!=null&&t.placeholder)}get(){return this.value}getString(){var e;const t=this.get();return l.isArray(t)?t.join(", "):l.isObject(t)?JSON.stringify(t):t===!0?"1":t===!1?"0":l.isFilled(t)?((e=t==null?void 0:t.toString)==null?void 0:e.call(t))??"":""}getNumber(){return this.getBoolean()?parseFloat(this.getString()):0}getBoolean(){return l.isFilled(this.get())}getOriginal(){var t,e;return((t=this.props)==null?void 0:t.value)||((e=this.props)==null?void 0:e.modelValue)}getLength(){const t=this.get();return l.isArray(t)?t.length:l.isObject(t)?Object.keys(t).length:this.getString().length??0}set(t){return this.value!==t&&(this.value=t,this.change.set(this.getOriginal()!==t),this.callback()),this}setByEvent(t){switch(typeof t){case"object":t&&("value"in t?this.set(t.value):"target"in t&&this.setByTarget(t.target),"valueIs"in t&&(this.valueIs=t.valueIs));break;default:this.set(t);break}return this}setByTarget(t){const e=this.isCheckbox(t)?t.checked:t.value;return this.set(e)}setByChecked(t){const e=t.target;return this.set(e.checked)}setByRadio(t){const e=t.target,s=e.checked?e.value:"";return this.set(s)}update(){return this.set(this.getOriginal())}clear(){return this.set(""),this.element.clear(),this.valueIs=!1,this}isCheckbox(t){return t.type==="checkbox"}}class ze{constructor(t,e){this.props=t,this.value=e}get(){var e;const t=this.getIcon();return g.getBind(((e=this.props)==null?void 0:e.icon)??t,{value:t})}getIcon(){var t,e,s;if(this.value.getBoolean())return(t=this.props)==null?void 0:t.iconCheckbox;if((e=this.props)!=null&&e.indeterminate)return(s=this.props)==null?void 0:s.iconIndeterminate}}class We{constructor(t){this.props=t}get(t){var s;const e=(s=this.props)==null?void 0:s.validationCode;if(e&&!t.valid){if(typeof e=="string")return e;{const i=this.getIndex(t);if(i&&i in e)return e[i]}}}getIndex(t){for(const e in t)if(e!=="valid"&&t[e])return e}}function Y(n,t="check"){const e=g.createElement(void 0,"input",Ke(n));return{group:t,input:e,pattern:n,check(s){return e.value=g.anyToString(s),{group:t,input:e,status:e.checkValidity(),validationMessage:e.validationMessage,validity:e.validity,pattern:n,value:s}}}}function Ke(n){if(l.isFilled(n)){const t=l.executeFunction(n);if(l.isString(n))return{pattern:n};if(l.isObjectNotArray(t))return t}return{}}class qe{constructor(t,e,s,i,a){o(this,"item");o(this,"validation");this.props=t,this.element=e,this.value=s,this.code=i,this.match=a,this.item=Y(this.element.getPattern())}isError(){var t;return!((t=this.get())!=null&&t.status)}get(){var t;return this.checkGlobal()??this.checkItem()??((t=this.match)==null?void 0:t.check())??{value:void 0}}getMessage(){var t;return((t=this.get())==null?void 0:t.validationMessage)??""}set(t){return"status"in t&&"validationMessage"in t&&"value"in t?this.validation={status:t.status,required:t==null?void 0:t.required,input:t==null?void 0:t.input,validationMessage:t.validationMessage,validity:t==null?void 0:t.validity,pattern:t==null?void 0:t.pattern,value:t.value}:this.validation=void 0,this}update(){return this.item=Y(this.element.getPattern()),this}checkGlobal(){var t;return(t=this.props)!=null&&t.validationMessage?{status:!1,validationMessage:this.props.validationMessage,value:this.value.get()}:this.validation??void 0}checkItem(){const t=this.item.check(this.value.get());if(!(t!=null&&t.status))return t}}class Ye{constructor(t,e,s,i,a){this.props=t,this.change=e,this.value=s,this.validation=i,this.callbackEmit=a}onInput(t){this.validation.set(t),this.value.setByEvent(t),this.on(t)}onChange(t){this.on(t,"change")}onSelect(t){this.value.setByEvent(t),this.on(t).onChange(t)}onChecked(t){this.value.setByChecked(t),this.on(t).onChange(t)}onRadio(t){this.value.setByRadio(t),this.on(t).onChange(t)}onClear(t){this.value.clear(),this.on(t).onChange(t)}on(t,e="input"){if(this.callbackEmit(e,t,{...this.getValidation(e),...this.getData()}),e==="input"){const s=this.value.get();this.callbackEmit("update:value",s,{value:s}),this.callbackEmit("update:modelValue",s,{value:s})}return this}isValue(t){return!!(t&&["input","change"].indexOf(t)>=0)}getData(){return{value:this.value.get(),detail:this.props.detail}}getValidation(t){return this.isValue(t)?this.validation.get():{}}}class Ue{constructor(t,e,s,i){o(this,"element");o(this,"change");o(this,"value");o(this,"icon");o(this,"code");o(this,"validation");o(this,"event");this.element=new je(t,e),this.change=new Pe,this.value=new He(t,this.element,this.change,s),this.icon=new ze(t,this.value),this.code=new We(t),this.validation=new qe(t,this.element,this.value,this.code),this.event=new Ye(t,this.change,this.value,this.validation,i)}update(){return this.value.update(),this}}class Ge{constructor(t,e,s){o(this,"checkbox");o(this,"value",r.shallowRef(!1));o(this,"iconBind",r.shallowRef({}));o(this,"onInput",t=>this.checkbox.event.onChecked(t));this.checkbox=new Ue(t,e,()=>{this.update()},s),r.watchEffect(()=>this.checkbox.value.update()),r.watchEffect(()=>{this.update()})}update(){return this.value.value=this.checkbox.value.getBoolean(),this.iconBind.value=this.checkbox.icon.get(),this}}const K={disabled:Boolean,counter:[String,Number],maxlength:[String,Number],helperMessage:String,validationMessage:String},Xe={disabled:K.disabled,helperMessage:K.helperMessage,validationMessage:K.validationMessage},Je=function(n,t){const e=r.computed(()=>({disabled:n==null?void 0:n.disabled,counter:n==null?void 0:n.counter,maxlength:n==null?void 0:n.maxlength,helperMessage:n==null?void 0:n.helperMessage,validationMessage:n==null?void 0:n.validationMessage}));return{messageBind:e,renderFieldMessage(){const s=[];return t&&t.renderAdd(s,"message",e.value),s}}};class Qe extends y{constructor(e,s,i){super(e,s,i);o(this,"checkbox");o(this,"renderInput",()=>{const e=this.setup();return r.h("input",{class:e.classes.value.input,name:this.props.name,type:"checkbox",checked:e.value.value,on:this.props.on,onInput:e.onInput})});o(this,"renderInputHidden",()=>r.h("input",{name:this.props.name,type:"hidden",value:"0"}));o(this,"renderChecked",()=>{const e=this.setup(),s=[r.h("span",{class:e.classes.value.itemIcon},[this.components.renderOne("icon",e.iconBind.value)])];return this.components.renderAdd(s,"ripple",{disabled:e.isDisabled.value}),r.h("span",{class:e.classes.value.item},s)});o(this,"renderInfo",()=>{const e=this.setup(),s=[...e.renderLabel(),...e.renderFieldMessage()];return r.h("span",{class:e.classes.value.info},s)});this.checkbox=new Ge(s,this.element,(a,h,c)=>{var u;(u=this.emits)==null||u.call(this,a,h,c)}),this.init()}makeOptions(){return this}initSetup(){return{value:this.checkbox.value,iconBind:this.checkbox.iconBind,renderInput:this.renderInput,renderInputHidden:this.renderInputHidden,renderChecked:this.renderChecked,renderInfo:this.renderInfo,onInput:this.checkbox.onInput,...It(this.props,this.slots,this.getSubClass(["info","label"])),...Tt(this.props),...Je(this.props,this.components)}}initExpose(){return{}}initClasses(){return{main:{},input:this.getSubClass("input"),item:this.getSubClass("item"),itemIcon:this.getSubClass("item__icon"),info:this.getSubClass("info"),infoLabel:this.getSubClass("info__label")}}initStyles(){return{}}initRender(){const e=this.setup(),s=[e.renderInputHidden(),e.renderInput(),e.renderChecked()];return e.isLabel.value&&s.push(e.renderInfo()),r.h("label",{...this.getAttrs(),ref:this.element,class:e.classes.value.main},s)}}class Ze{constructor(t){this.props=t}is(){return!!this.get()}isValidation(){var t;return l.isFilled((t=this.props)==null?void 0:t.validationMessage)}get(){var t;if(this.isValidation())return this.props.validationMessage;if(l.isFilled((t=this.props)==null?void 0:t.helperMessage))return this.props.helperMessage}}class ts{constructor(t){this.props=t}is(){return this.getCounter()>0||this.isMax()}isMax(){return this.getMax()>0}get(){return this.isMax()?`${this.getCounter()} / ${this.getMax()}`:this.getCounter().toString()}getCounter(){var t;return l.toNumber(((t=this.props)==null?void 0:t.counter)??0)}getMax(){var t;return l.toNumber(((t=this.props)==null?void 0:t.maxlength)??0)}}class es{constructor(t){o(this,"message");o(this,"counter");this.props=t,this.message=new Ze(t),this.counter=new ts(t)}is(){var t;return!((t=this.props)!=null&&t.disabled)&&(this.message.is()||this.counter.is())}classes(){return{"??--validation":this.message.isValidation()}}}class ss{constructor(t){o(this,"item");o(this,"is",r.computed(()=>this.item.is()));o(this,"isMessage",r.computed(()=>this.item.message.is()));o(this,"isValidation",r.computed(()=>this.item.message.isValidation()));o(this,"isCounter",r.computed(()=>this.item.counter.is()));o(this,"isMax",r.computed(()=>this.item.counter.isMax()));o(this,"message",r.computed(()=>this.item.message.get()));o(this,"counter",r.computed(()=>this.item.counter.get()));o(this,"classes",r.computed(()=>this.item.classes()));this.item=new es(t)}}class is extends y{constructor(e,s,i){super(e,s,i);o(this,"message");o(this,"renderInfo",()=>{const e=this.setup();return r.h("div",{key:"message",class:e.classes.value.info,innerHTML:e.message.value})});o(this,"renderCounter",()=>{const e=this.setup();return r.h("div",{key:"counter",class:e.classes.value.counter,innerHTML:e.counter.value})});this.message=new ss(s),this.init()}makeOptions(){return this}initSetup(){return{is:this.message.is,isMessage:this.message.isMessage,isValidation:this.message.isValidation,isCounter:this.message.isCounter,isMax:this.message.isMax,message:this.message.message,counter:this.message.counter,renderInfo:this.renderInfo,renderCounter:this.renderCounter}}initExpose(){return{}}initClasses(){return{main:{...this.toClassName(this.message.classes.value)},info:this.getSubClass("info"),counter:this.getSubClass("counter")}}initStyles(){return{}}initRender(){const e=this.setup(),s=[];if(e.isMessage.value&&s.push(e.renderInfo()),e.isCounter.value&&s.push(e.renderCounter()),e.is.value)return r.h("div",{...this.getAttrs(),ref:this.element,key:"main",class:e.classes.value.main},s)}}const ns={...K},Lt=r.defineComponent({name:"M3FieldMessage",__name:"M3FieldMessage",props:{...ns},setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-fieldMessage":!0}})),h=r.computed(()=>({})),c=new is("m3.fieldMessage",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),rs={...St},Ot=r.defineComponent({name:"M3Ripple",__name:"M3Ripple",props:{...rs},setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-ripple":!0}})),h=r.computed(()=>({})),c=new Bt("m3.ripple",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),ft={type:"text",autocomplete:"off"},Ft={...ht,...ct,name:String,value:String,modelValue:String,detail:Object,type:{type:String,default:ft.type},inputmode:String,spellcheck:Boolean,required:Boolean,pattern:String,match:[String,HTMLInputElement,Object],arrow:Boolean,step:[String,Number],min:[String,Number],max:[String,Number],minlength:[String,Number],maxlength:[String,Number],autofocus:Boolean,autocomplete:{type:String,default:ft.autocomplete},input:Object,placeholder:String,helperMessage:String,validationMessage:String,validationCode:[String,Object],on:Object,"onUpdate:value":Function,"onUpdate:modelValue":Function},as={...Ft},os={},it={...Ft,...Xe,value:[String,Boolean],modelValue:[String,Boolean],icon:[String,Object],indeterminate:Boolean,iconCheckbox:String,iconIndeterminate:String,comp:Boolean,required:Boolean},yt={...os,iconCheckbox:"check",iconIndeterminate:"indeterminate"},hs={...it,iconCheckbox:{type:it.iconCheckbox,default:yt.iconCheckbox},iconIndeterminate:{type:it.iconIndeterminate,default:yt.iconIndeterminate},required:Boolean},cs=r.defineComponent({name:"M3Checkbox",__name:"M3Checkbox",props:{...hs},emits:["input","update:value","update:modelValue","change"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-checkbox":!0,"m3-checkbox--required":i.required}})),h=r.computed(()=>({})),c=new Qe("m3.checkbox",i,{emits:s,components:{icon:ut,message:Lt,ripple:Ot},classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}});class ls extends lt{}const q={tag:"span"},us={...ht,...xt,...Mt,...ct,...Et,tag:{type:String,default:q==null?void 0:q.tag},disabled:Boolean,selected:Boolean,loading:Boolean,readonly:Boolean},nt={adaptive:["icon","sm","md"],height:["sm","md","lg"],palette:["primary","secondary","tertiary","red","green","error","neutral","neutralVariant"]},E={...q,height:"md",outlined:!0,input:!0},ds={...us,focus:Boolean,disabled:Boolean,selected:Boolean,loading:Boolean,readonly:Boolean,adaptive:String,height:{type:String,default:E==null?void 0:E.height},outlined:{type:Boolean,default:E==null?void 0:E.outlined},elevated:Boolean,input:{type:Boolean,default:E==null?void 0:E.input},assist:Boolean,filter:Boolean,suggestion:Boolean,avatar:Boolean,dragged:Boolean,palette:String},gs=r.defineComponent({name:"M3Chip",__name:"M3Chip",props:{...ds},emits:["click"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-chip":!0,"m3-chip--focus":i.focus,"m3-chip--disabled":i.disabled,"m3-chip--selected":i.selected,"m3-chip--loading":i.loading,"m3-chip--readonly":i.readonly,[`m3-chip--adaptive--${i.adaptive}`]:l.inArray(nt.adaptive,i.adaptive),[`m3-chip--height--${i.height}`]:l.inArray(nt.height,i.height),"m3-chip--outlined":i.outlined&&!i.elevated,"m3-chip--elevated":i.elevated,"m3-chip--input":i.input&&!i.assist&&!i.filter&&!i.suggestion,"m3-chip--assist":i.assist,"m3-chip--filter":i.filter,"m3-chip--suggestion":i.suggestion,"m3-chip--avatar":i.avatar,"m3-chip--dragged":i.dragged,[`m3-palette--${i.palette}`]:l.inArray(nt.palette,i.palette)}})),h=r.computed(()=>({})),c=new ls("m3.chip",i,{emits:s,components:{icon:dt,progress:gt},classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u),null,{default:r.withCtx(()=>[r.renderSlot(d.$slots,"default")]),_:3}))}});class ps extends y{constructor(t,e,s){super(t,e,s),this.init()}makeOptions(){return this}initSetup(){return{}}initExpose(){return{}}initClasses(){return{main:{}}}initStyles(){return{}}initRender(){var t;return r.h("div",{ref:this.element,class:(t=this.classes)==null?void 0:t.value.main})}}const ms={...as},fs=r.defineComponent({name:"M3Input",__name:"M3Input",props:{...ms},emits:["input","update:value","update:modelValue","change"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-input":!0}})),h=r.computed(()=>({})),c=new ps("m3.input",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}});class ys{constructor(t){this.props=t}isNumber(){return this.get()==="number"}isCurrency(){return this.get()==="currency"}isCurrencyOrNumber(){return this.isNumber()||this.isCurrency()}isEmail(){return this.get()==="email"}isTime(){return["full","datetime","time","hour-minute","hour","minute","second"].indexOf(this.get())!==-1}isDate(){return this.isTime()||["date","year-month","month","day"].indexOf(this.get())!==-1}get(){var t;return((t=this.props)==null?void 0:t.type)??"text"}getByDate(){return this.isDate()?this.get():"date"}}class bs{constructor(){o(this,"chars",[]);o(this,"start",!1)}is(){return this.chars.length>0}get(){return this.chars}add(t){return this.chars.push(t),this}go(t){return this.start?(this.add(t),!1):(this.goStart(),!0)}goStart(){return this.start=!0,this}reset(){return this.resetChars(),this.start=!1,this}resetChars(){return this.chars=[],this}}class vs{constructor(t){o(this,"value",!1);this.buffer=t}is(){return this.value}in(){this.value=!0,this.buffer.reset()}out(){this.value=!1,this.buffer.reset()}}class ks{constructor(){o(this,"value",{})}is(t){return t in this.value}get(){return this.value}getCode(){return[...Object.keys(this.value),...Object.values(this.value)]}getByIndex(t){var e;return((e=this.value)==null?void 0:e[t])??0}add(t){return this.value[t]=this.getByIndex(t)+1,this}pop(t){return this.is(t)?(--this.value[t]<=0&&delete this.value[t],!0):!1}reset(){return this.value={},this}expandMask(t){let e=t;return l.forEach(this.value,(s,i)=>{e=e.replace(g.getExp(i,"g","([:value]+)"),a=>`${a}${g.strFill(i,s)}`)}),e}}class Cs{constructor(){o(this,"char","")}is(){return this.char!==""}isChar(t){return this.char===t}get(){return this.char}set(t){return this.char=t,this}reset(){return this.set("")}}class ws{constructor(){o(this,"length",0)}is(){return this.get()>0}get(){return this.length}set(t){return this.length=t,this}}const Bs={Y:"[0-9]{4}",M:{type:"number",min:"1",max:"12"},D:n=>{var e,s;return{type:"number",min:"1",max:new g.Datetime(`${((e=n==null?void 0:n.Y)==null?void 0:e.value)??"2000"}-${((s=n==null?void 0:n.M)==null?void 0:s.value)??"01"}-01`).getMaxDay().toString()}},h:{type:"number",min:"0",max:"23"},m:{type:"number",min:"0",max:"59"},s:{type:"number",min:"0",max:"59"}};class Ss{constructor(t,e){this.props=t,this.type=e}getDatetime(t){var e;return new g.Datetime(t??"1987-12-18T10:20:30",this.type.getByDate(),(e=this.props)==null?void 0:e.language)}getMask(){return this.getDatetime().setHour24(!0).locale(void 0,"2-digit").replace("1987","YYYY").replace("12","MM").replace("18","DD").replace("10","hh").replace("20","mm").replace("30","ss").split("")}getValue(t){return this.getDatetime(t).locale(void 0,"2-digit")}getValueStandard(t){var s,i,a,h,c,u;const e=`${((s=t==null?void 0:t.Y)==null?void 0:s.value)||"2000"}-${((i=t==null?void 0:t.M)==null?void 0:i.value)||"01"}-${((a=t==null?void 0:t.D)==null?void 0:a.value)||"01"}T${((h=t==null?void 0:t.h)==null?void 0:h.value)||"00"}:${((c=t==null?void 0:t.m)==null?void 0:c.value)||"00"}:${((u=t==null?void 0:t.s)==null?void 0:u.value)||"00"}`;return isNaN(Date.parse(e))?"":this.getDatetime(e).standard(!1)}getPattern(){return Bs}getView(t){var e;return(e=this.getViewList())==null?void 0:e[t]}getViewList(){return{Y:"y",M:"m",D:"d",h:"h",m:"m",s:"s"}}}class Is{constructor(t,e,s){this.props=t,this.type=e,this.rubberItem=s}isFractionRubber(){return this.props.fraction===!0}getIntl(){var t;return new l.GeoIntl((t=this.props)==null?void 0:t.language)}getFraction(){var e;if(this.type.isCurrency())return 2;const t=(e=this.props)==null?void 0:e.fraction;return typeof t=="number"?t:typeof t=="string"&&t.match(/[0-9]+/)?Number(t):this.rubberItem.is("f")?this.rubberItem.getByIndex("f")+1:t===!0?1:0}getMask(){return(this.type.isCurrency()?this.getCurrency():this.getNumber()).replace(/9/ig,"n").replace(/3/ig,"f").split("")}getSpecial(){return{n:{},f:{defaultValue:"0"}}}getRubber(){return{n:{rubber:!0,transitionChar:this.getDecimal(),maxLength:10},f:{rubber:this.isFractionRubber(),maxLength:4}}}getValueStandard(t){var e,s;return`${((e=t==null?void 0:t.n)==null?void 0:e.value)||"0"}.${((s=t==null?void 0:t.f)==null?void 0:s.value)||"0"}`}getNumber(){return this.getIntl().number(this.getNumberForString(),{maximumFractionDigits:9})}getCurrency(){return this.getIntl().currency(this.getNumberForString())}getDecimal(){return[this.getIntl().decimal(),"."]}getView(){return"0"}getNumberForString(){var a;const t=this.getFraction(),e=g.strFill("9",this.rubberItem.getByIndex("n")+1),s=t?`.${g.strFill("3",t)}`:"",i=this.type.isCurrency()&&((a=this.props)!=null&&a.currency)?` ${this.props.currency}`:"";return`${e}${s}${i}`}}class xs extends g.CacheItem{constructor(t,e,s){super(()=>this.initValue()),this.props=t,this.type=e,this.format=s}isSpecial(t){return this.get().indexOf(t)!==-1}isTransitionChar(t,e){const s=this.getTransitionChar(t);return s?l.isSelected(e,s):!1}isString(){return this.get().length<=1}isDefault(t){return!!this.getDefault(t)}get(){var t,e;return this.getCache([(t=this.props)==null?void 0:t.type,(e=this.props)==null?void 0:e.special])}getFirst(){var t;return((t=this.get())==null?void 0:t[0])??"*"}getDefault(t){var e;return(e=this.getSpecialItem(t))==null?void 0:e.defaultValue}getTransitionChar(t){var e;return(e=this.getSpecialItem(t))==null?void 0:e.transitionChar}getMatch(t){var e;return(e=this.getSpecialItem(t))==null?void 0:e.match}getPattern(t){var e;return(e=this.getSpecialItem(t))==null?void 0:e.pattern}getView(t){var e;return(e=this.getSpecialItem(t))==null?void 0:e.view}getRubberList(){const t={},e=this.getSpecial();return l.isObjectNotArray(e)&&l.forEach(e,(s,i)=>{s!=null&&s.rubber&&(t[i]=s)}),t}getSpecial(){var t;return this.type.isCurrencyOrNumber()?this.format.getSpecial():((t=this.props)==null?void 0:t.special)??"*"}getSpecialItem(t){const e=this.getSpecial();if(l.isObjectNotArray(e)&&t in e)return e[t]}initValue(){if(this.type.isCurrencyOrNumber())return["n","f"];if(this.type.isTime())return["Y","M","D","h","m","s"];if(this.type.isDate())return["Y","M","D"];const t=this.getSpecial();return l.isArray(t)?t:l.isObject(t)?Object.keys(t):[t]}}const bt=/[0-9]/;class Ms{constructor(t,e){this.props=t,this.special=e}is(t,e){const s=this.get(e);return s instanceof RegExp?!!t.match(s):l.isString(s)?!!t.match(new RegExp(s)):!!t.match(bt)}get(t){var e;return(t&&this.special.getMatch(t))??((e=this.props)==null?void 0:e.match)??bt}filter(t){const e=this.special.get();return t.split("").filter(s=>e.find(i=>this.is(s,i)))}}class Ts{constructor(t,e,s,i){o(this,"inputs");this.props=t,this.type=e,this.date=s,this.special=i,this.inputs=new g.CacheItem(()=>this.initInput())}isCheck(){var t;return!!((t=this.props)!=null&&t.check)}get(t){var e;return t==="check"?this.getCheck():(e=this.getList())==null?void 0:e[t]}getList(){const t=this.getByType();for(const e in t){const s=this.getPattern(e);l.isObjectNotArray(s)&&l.isObjectNotArray(t[e])&&Object.assign(t[e],s)}return t}getPattern(t){var e;return(t&&this.special.getPattern(t))??((e=this.props)==null?void 0:e.pattern)}getCheck(){var t;return(t=this.props)==null?void 0:t.check}getInput(t="check"){var e;return(e=this.getInputList())==null?void 0:e[t]}getInputList(){var t,e;return this.inputs.getCache([(t=this.props)==null?void 0:t.pattern,(e=this.props)==null?void 0:e.check])}getByType(){if(this.type.isDate())return this.date.getPattern();const t={};return this.special.get().forEach(e=>{t[e]={}}),t}initInput(){const t={},e=this.getCheck();return l.forEach(this.getList(),(s,i)=>{t[i]=Y(s,i)}),e&&(t.check=Y(e)),t}}class Es{constructor(t,e){this.props=t,this.type=e}isEnd(){var t;return this.type.isCurrencyOrNumber()||((t=this.props)==null?void 0:t.dir)==="rtl"||!1}isRight(){var t;return((t=this.props)==null?void 0:t.right)||this.isEnd()}}class _s extends g.CacheItem{constructor(t,e,s,i,a,h,c){super(()=>this.initList()),this.props=t,this.type=e,this.rubberItem=s,this.rubberTransition=i,this.special=a,this.match=h,this.format=c}is(t){return t in this.getList()}isTransition(t){return this.getTransitionList().indexOf(t)>=0}isValue(t,e){return e in t&&this.is(e)}get(t){var e;return(e=this.getList())==null?void 0:e[t]}getList(){var t,e;return this.getCache([(t=this.props)==null?void 0:t.type,(e=this.props)==null?void 0:e.special])}getTransitionList(){return l.getColumn(Object.values(this.getList()).filter(t=>"transitionChar"in t&&(l.isString(t.transitionChar)||l.isArray(t.transitionChar))),"transitionChar").flat()}update(t,e,s){const i=this.get(e),a=t==null?void 0:t[e];return i&&a?l.isSelected(s,i==null?void 0:i.transitionChar)||i!=null&&i.maxLength&&(i==null?void 0:i.maxLength)<=(a==null?void 0:a.maxLength)?(this.rubberTransition.set(e),!1):(a.end&&this.match.is(s,e)&&!this.rubberTransition.isChar(e)&&(this.rubberItem.add(e),this.rubberTransition.reset()),!0):!1}pop(t){return this.rubberItem.pop(t)}reset(){return this.rubberItem.reset(),this.rubberTransition.reset(),this}initList(){const t=this.special.getRubberList();return this.type.isCurrencyOrNumber()?l.replaceRecursive(this.format.getRubber(),t):t}}class As extends g.CacheItem{constructor(e,s,i,a,h,c,u){super(()=>this.initMask());o(this,"info");this.props=e,this.type=s,this.rubberItem=i,this.characterLength=a,this.date=h,this.format=c,this.special=u,this.info=new g.CacheItem(()=>this.initInfo())}get(e){var s;return((s=this.getList())==null?void 0:s[e])??""}getInfo(){return this.info.getCache(this.getComparison())}getInfoBySelection(e){const s=this.getInfo();return s.find(i=>i.key>=e)??s[s.length-1]}getList(){return this.getCache(this.getComparison())}getByChar(e,s=-1){let i=s;return this.getList().forEach((a,h)=>{a===e&&h>=s&&(i=h)}),i}getLength(){return this.getList().length}getMaxLength(){const e=this.getMask();return l.isArray(e)?l.getMaxLength(e):this.getList().length}getLengthBySpecial(){return this.getInfo().length}getQuantity(e,s){if(e===s)return 1;let i=0;for(let a=e;a<s;a++)this.special.isSpecial(this.get(a))&&i++;return i}getComparison(){var e,s,i,a,h,c;return[this.characterLength.get(),...this.rubberItem.getCode(),(e=this.props)==null?void 0:e.mask,(s=this.props)==null?void 0:s.special,(i=this.props)==null?void 0:i.fraction,(a=this.props)==null?void 0:a.currency,(h=this.props)==null?void 0:h.type,(c=this.props)==null?void 0:c.language]}getMask(){var e;return((e=this.props)==null?void 0:e.mask)??""}getMaskActive(){const e=this.getMask();return l.isArray(e)?e.find(s=>this.getSpecialLength(s)>=this.characterLength.get())||(e==null?void 0:e[e.length-1])||"":e}getBasic(){return this.rubberItem.expandMask(this.getMaskActive()).split("")}getSpecialLength(e){return e.split("").filter(s=>this.special.isSpecial(s)).length}initMask(){return this.type.isCurrencyOrNumber()?this.format.getMask():this.type.isDate()?this.date.getMask():this.getBasic()}initInfo(){const e=[];let s=0;return this.getList().forEach((i,a)=>{this.special.isSpecial(i)&&(e.push({index:s,key:a,char:i}),s++)}),e}}class $s{constructor(t,e){o(this,"value",0);o(this,"immediate",0);o(this,"shift",!1);this.special=t,this.mask=e}get(){return this.value}getFirst(){var t,e;return(e=(t=this.mask.getInfo())==null?void 0:t[0])==null?void 0:e.key}getFocus(){return this.getCharacter(this.value)}getNext(){return this.getCharacter(this.value+1)}getPrevious(){return this.getCharacter(this.value-1)}getImmediate(){return this.getCharacter(this.immediate)}getShift(){return this.shift?this.value>0?this.getCharacter(this.value-1)+1:0:this.getFocus()}set(t){return this.value=t,this}setByMask(t,e=!0){if(e){let s,i;this.mask.getInfo().forEach(a=>{s===void 0&&a.key>=t&&(s=a.index),a.key<=t&&(i=a.index)}),this.set(s!==void 0?s:this.mask.getLengthBySpecial()),this.setImmediate(i!==void 0?i:this.mask.getLengthBySpecial())}return this}setImmediate(t){return this.immediate=t,this}setShift(t){return this.shift=t,this}resetImmediate(){return this.immediate=this.value<=0?0:this.value-1,this}goBack(){return this.value>0&&this.value--,this}goNext(){return this.value<=this.mask.getLength()&&this.value++,this}getCharacter(t){for(const e of this.mask.getInfo())if(e.index>=t)return e.key;return this.mask.getLength()}}const H="~";class Ls{constructor(t,e,s,i,a,h){o(this,"value",[]);this.rubberItem=t,this.characterLength=e,this.special=s,this.rubber=i,this.mask=a,this.selection=h}is(){return this.value.length>0}isCharDelete(){const t=this.selection.get();return t in this.value&&this.value[t]===H}get(){return this.value}getFocus(){return this.mask.get(this.selection.getFocus())}getImmediate(){return this.mask.get(this.selection.getImmediate())}getNext(){return this.mask.get(this.selection.getNext())}add(t){return this.value.splice(this.selection.get(),this.isCharDelete()?1:0,t),this.selection.goNext().resetImmediate(),this.updateLength(),this}pop(){const t=this.selection.get()-1;return this.isSpecialNextAnother()?this.value[t]=H:(this.value.splice(t,1),this.updateLength()),this.selection.goBack().resetImmediate(),this}reset(){return this.value=[],this.selection.set(0).resetImmediate(),this.updateLength(),this}shift(t=1){return this.characterLength.set(this.value.length+t),this}isSpecialNextAnother(){const t=this.selection.get()-1,e=this.value.length;if(t>=0&&t<=e){const s=this.mask.getInfo(),i=s[t].char;if(!this.rubberItem.is(i)){for(let a=t;a<e;a++)if(a in s){const h=s[a].char;if(this.special.isSpecial(h)&&i!==h)return!0}}}return!1}updateLength(){return this.characterLength.set(this.value.length),this}}class Os extends g.CacheItem{constructor(t,e,s,i){super(()=>this.initValue()),this.rubberTransition=t,this.mask=e,this.special=s,this.character=i}is(){return this.getLength()>0}get(){return this.getCache([...this.mask.getList(),...this.character.get()])}getChar(t){var e;return(e=this.get())==null?void 0:e[t]}getLength(){return this.get().length}initValue(){const t=this.character.get(),e=[];let s=0;for(const i of this.mask.getList())if(!this.special.isSpecial(i))e.push(i);else if(s in t){if(e.push(t[s++]),s>t.length&&this.rubberTransition.is()&&!this.rubberTransition.isChar(i))break}else break;return e.join("")}}class Fs{constructor(t,e,s,i,a,h){o(this,"info");o(this,"valueFinal");this.type=t,this.date=e,this.format=s,this.mask=i,this.special=a,this.valueBasic=h,this.info=new g.CacheItem(()=>this.initInfo()),this.valueFinal=new g.CacheItem(()=>this.initValue())}isFull(){for(const t of Object.values(this.getInfo()))if(!t.full)return!1;return!0}isEnd(){for(const t of Object.values(this.getInfo()))if(!t.end)return!1;return!0}isFullByGroup(t){var e;return((e=this.getInfoItem(t))==null?void 0:e.full)??!1}get(){return this.type.isCurrencyOrNumber()?this.format.getValueStandard(this.getInfo()):this.type.isDate()?this.isFull()?this.date.getValueStandard(this.getInfo()):"":this.valueFinal.getCache([...this.valueBasic.get()])}getForCheck(){const t=this.get();return{group:"check",value:t,maxLength:t.length,full:this.isFull(),end:this.isEnd(),chars:t.split("")}}getInfo(){return this.info.getCache([this.valueBasic.get(),...this.mask.getList()])}getInfoItem(t){var e;return(e=this.getInfo())==null?void 0:e[t]}isStandard(t){return!!this.valueBasic.getChar(t)}add(t,e){return e in t||(t[e]={group:e,value:"",maxLength:0,full:!1,end:!1,chars:[]}),t[e]}initInfo(){const t=this.valueBasic.get(),e={};return this.mask.getList().forEach((s,i)=>{if(this.special.isSpecial(s)){const a=this.add(e,s);this.isStandard(i)&&t[i]!==H&&a.chars.push(t[i]),a.maxLength++,a.value=a.full?a.chars.join(""):"",a.full=this.special.isDefault(s)||a.maxLength===a.chars.length,a.end=a.maxLength===a.chars.length}}),e}initValue(){const t=this.valueBasic.get().split(""),e=this.mask.getList();let s="";for(const i in e)if(i in t)s+=t[i];else{const a=this.special.getDefault(e[i]);a&&(s+=a)}return s}}class Rs{constructor(t,e){this.pattern=t,this.value=e}isError(t){var s;const e=(s=this.get())==null?void 0:s.group;return!!(e&&(e===t||e==="check"))}checkValidity(){return this.get()===void 0}get(){for(const t of Object.values(this.pattern.getInputList())){const e=this.value.getInfoItem(t.group);if(e&&e.full){const s=t.check(e.value);if(s&&!s.status)return s}}return this.getValidationCheck()}getMessage(){var t;return((t=this.get())==null?void 0:t.validationMessage)??""}getValidationCheck(){var t;if(this.value.isFull()){const e=this.value.getForCheck();if(this.pattern.isCheck()){const s=(t=this.pattern.getInput(e.group))==null?void 0:t.check(e.value);if(s&&!s.status)return s}return{value:e.value,required:!0}}return{value:this.value.get(),required:!1}}}const Ns="_";class Ds{constructor(t,e,s,i,a,h,c,u,d,p="is-character"){this.props=t,this.type=e,this.date=s,this.format=i,this.special=a,this.rubber=h,this.mask=c,this.valueBasic=u,this.validation=d,this.className=p}get(){const t=[],e=this.valueBasic.get();return this.mask.getList().forEach((s,i)=>{const a=e==null?void 0:e[i];t.push({className:`${this.className} ${this.className}--${this.getStatus(s,a)}`,value:this.getValue(s,a)})}),t}getInput(){const t=[],e=this.mask.getList();return this.valueBasic.get().split("").forEach((s,i)=>{s===H?t.push(this.getSpecialToView((e==null?void 0:e[i])??"")??s):t.push(s)}),t.join("")}isValue(t){return!!(t&&t!==H)}getStatus(t,e){return this.isValue(e)?this.special.isSpecial(t)?this.validation.isError(t)?"error":"special":"standard":this.rubber.isTransition(t)?"transition":"placeholder"}getValue(t,e){return this.isValue(e)?e:this.getSpecialToView(t)}getSpecialToView(t){var e;return this.special.isSpecial(t)?this.getViewChar(t)??this.special.getView(t)??((e=this.props)==null?void 0:e.view)??Ns:t}getViewChar(t){if(this.type.isDate())return this.date.getView(t);if(this.type.isCurrencyOrNumber())return this.format.getView()}}class Vs{constructor(t,e){o(this,"type");o(this,"event");this.validation=t,this.callbackEvent=e}isValue(){return!!(this.type&&["input","change"].indexOf(this.type)>=0)}go(){if(this.type&&this.event){const t=this.isValue()?this.validation.get():void 0;this.callbackEvent(this.type,this.event,t)}return this}set(t,e){return this.setType(t),this.setEvent(e),this}setType(t){return this.type=t,this}setEvent(t){return this.event=t,this}reset(){return this.resetType(),this.resetEvent(),this}resetType(){return this.type=void 0,this}resetEvent(){return this.event=void 0,this}}class js{constructor(t,e,s,i,a,h,c,u,d,p,C,M,Qt,Zt,te){this.type=t,this.buffer=e,this.focus=s,this.rubberTransition=i,this.date=a,this.special=h,this.match=c,this.rubber=u,this.mask=d,this.selection=p,this.character=C,this.valueBasic=M,this.value=Qt,this.emit=Zt,this.element=te}add(t,e,s=!0){let i=!1;return this.selection.setByMask(t,s),this.rubberTransition.reset(),l.toArray(e).forEach(a=>{const h=this.character.getFocus(),c=this.character.getImmediate();this.selection.setShift(this.rubber.update(this.value.getInfo(),c,a)),this.rubberTransition.is()?this.selection.setByMask(this.mask.getByChar(this.rubberTransition.get(),this.selection.getImmediate())+1,s):this.match.is(a,h)&&(this.character.shift(),this.character.getFocus()&&(this.mask.getMaxLength()>this.valueBasic.getLength()||this.character.isCharDelete())&&(this.character.add(a),i=!0))}),this.goSelection(),i}pop(t,e=t,s=!0){if(t>=0&&e<=this.mask.getMaxLength()){let i=this.mask.getQuantity(t,e);for(s&&this.selection.setByMask(e);i--;)this.rubberTransition.reset(),this.character.pop(),this.character.shift(0),this.selection.setShift(this.rubber.pop(this.character.getFocus()));this.goSelection()}return this}reset(t=""){if(this.character.reset(),this.rubber.reset(),l.isFilled(t)){const e=this.type.isDate()?this.date.getValue(t):t;this.add(0,this.extra(e.split("")))}return this}extra(t){var h,c;if(this.character.is())return t;const e=this.mask.getList(),s=[...t];let i=this.match.get((c=(h=this.mask.getInfo())==null?void 0:h[0])==null?void 0:c.char),a=0;if(i)for(const u in e){const d=e[u];if(this.special.isSpecial(d)){for(let p=a;p<s.length&&(a++,!s[p].match(i));p++);i=this.match.get(d)}else if(d.match(i)){let p=!1;for(let C=a;C<s.length;C++){const M=s[C];if(a++,M.match(i)){d===M?(s.splice(C,1),a--):p=!0;break}}if(p)break}}return s}goSelection(t=!0){return this.focus.is()&&requestAnimationFrame(()=>{if(this.element.value&&(!t||!this.goBuffer())){const e=this.valueBasic.getLength(),s=this.selection.getShift(),i=e<s?e:s;this.element.value.selectionEnd=i,this.element.value.selectionStart=i}}),this}goBuffer(){return this.buffer.is()?(this.add(this.selection.getShift(),this.buffer.get()),this.buffer.resetChars(),!0):(this.buffer.reset(),this.emit.go(),!1)}}class Ps{constructor(t,e,s,i,a,h,c,u,d){o(this,"change",!1);o(this,"unidentified");this.buffer=t,this.focus=e,this.characterLength=s,this.right=i,this.selection=a,this.valueBasic=h,this.validation=c,this.emit=u,this.data=d}onFocus(t){this.change=!1,this.focus.in(),this.emit.set("focus",t).go()}onBlur(t){this.change&&this.emit.setType("change").go(),this.focus.out(),this.emit.set("blur",t).go()}onKeydown(t){const e=this.getSelectionInfo(t),{start:s,end:i}=e;this.emit.set("keydown",t).go(),!this.isMetaKey(t)&&(this.isKey(t)?t.key==="Backspace"?(s>0||s!==i)&&this.data.pop(s,i):t.key.length<=1&&(s===i?this.buffer.go(t.key)&&this.data.add(s,t.key):(this.buffer.goStart(),this.data.pop(s,i).add(this.selection.getShift(),t.key))):this.unidentified=e)}onKeyup(t){this.emit.set("keyup",t).go(),!this.isMetaKey(t)&&this.isKey(t)&&["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].indexOf(t.key)>=0&&(this.makeToEnd(t),this.makeToStart(t))}onBeforeinput(t){this.emit.set("beforeinput",t).go(),this.unidentified||(this.makeChange(t),g.makeStopPropagation(t))}onInput(t){if(this.unidentified){const e=t.target;(this.unidentified.length>e.value.length||this.unidentified.start!==this.unidentified.end)&&this.data.pop(this.unidentified.start,this.unidentified.end),"data"in t?t.data&&this.buffer.go(t.data)&&this.data.add(this.unidentified.start,t.data):this.data.reset(e.value),this.makeChange(t),this.unidentified=void 0}}onPaste(t){const{start:e,end:s}=this.getSelectionInfo(t);g.getClipboardData(t).then(i=>{const a=i.split("");e===s?this.data.add(e,this.data.extra(a)):this.data.pop(e,s).add(this.selection.getShift(),this.data.extra(a)),this.change=!0,this.emit.set("paste",t).go()}).catch(i=>console.error("getClipboardData",i))}onChange(t){const e=t.target;this.data.reset(e.value),this.emit.set("change",t).go()}onClick(t){this.makeToEnd(t),this.makeToStart(t)}isMetaKey(t){return t.metaKey||t.altKey||t.ctrlKey}isKey(t){return"key"in t&&t.key!=="Unidentified"}getSelectionInfo(t){const e=t.target;return{target:e,start:e.selectionStart??0,end:e.selectionEnd??0,length:e.value.length}}makeChange(t){this.change=!0,this.emit.set("input",t),!this.buffer.is()&&(this.emit.go(),this.emit.resetType())}makeToEnd(t){if(this.right.isRight()){const e=this.valueBasic.getLength(),{target:s,start:i,end:a}=this.getSelectionInfo(t);i>e&&(s.selectionStart=e),a>e&&(s.selectionEnd=e)}}makeToStart(t){const e=this.selection.getFirst(),{target:s,start:i}=this.getSelectionInfo(t);i<e&&(s.selectionStart=e,s.selectionEnd=e)}}class Hs{constructor(t,e,s,i="is-character"){o(this,"type");o(this,"buffer");o(this,"focus");o(this,"rubberItem");o(this,"rubberTransition");o(this,"characterLength");o(this,"date");o(this,"format");o(this,"special");o(this,"match");o(this,"pattern");o(this,"right");o(this,"rubber");o(this,"item");o(this,"selection");o(this,"character");o(this,"valueBasic");o(this,"value");o(this,"validation");o(this,"view");o(this,"emit");o(this,"data");o(this,"event");o(this,"oldValue","");this.type=new ys(t),this.buffer=new bs,this.focus=new vs(this.buffer),this.rubberItem=new ks,this.rubberTransition=new Cs,this.characterLength=new ws,this.date=new Ss(t,this.type),this.format=new Is(t,this.type,this.rubberItem),this.special=new xs(t,this.type,this.format),this.match=new Ms(t,this.special),this.pattern=new Ts(t,this.type,this.date,this.special),this.right=new Es(t,this.type),this.rubber=new _s(t,this.type,this.rubberItem,this.rubberTransition,this.special,this.match,this.format),this.item=new As(t,this.type,this.rubberItem,this.characterLength,this.date,this.format,this.special),this.selection=new $s(this.special,this.item),this.character=new Ls(this.rubberItem,this.characterLength,this.special,this.rubber,this.item,this.selection),this.valueBasic=new Os(this.rubberTransition,this.item,this.special,this.character),this.value=new Fs(this.type,this.date,this.format,this.item,this.special,this.valueBasic),this.validation=new Rs(this.pattern,this.value),this.view=new Ds(t,this.type,this.date,this.format,this.special,this.rubber,this.item,this.valueBasic,this.validation,i),this.emit=new Vs(this.validation,s),this.data=new js(this.type,this.buffer,this.focus,this.rubberTransition,this.date,this.special,this.match,this.rubber,this.item,this.selection,this.character,this.valueBasic,this.value,this.emit,e),this.event=new Ps(this.buffer,this.focus,this.characterLength,this.right,this.selection,this.valueBasic,this.validation,this.emit,this.data),t!=null&&t.value&&(this.oldValue=g.anyToString(t==null?void 0:t.value),this.data.reset(this.oldValue))}getValueBasic(){if(this.right.isRight()){let t="";return this.view.get().forEach(e=>{t+=e.value}),t}return this.view.getInput()}getClasses(){return{"??--value":this.characterLength.is(),"??--end":this.right.isEnd()}}goSelection(){return this.data.goSelection(!1),this}reset(t){const e=g.anyToString(t);return this.oldValue!==e?(this.oldValue=e,this.data.reset(e),this.emit.set("reset",{}).go(),!0):!1}}class zs{constructor(t,e,s,i="is-character"){o(this,"mask");o(this,"valueBasic",r.shallowRef(""));o(this,"value",r.shallowRef(""));o(this,"view",r.shallowRef([]));o(this,"classes",r.shallowRef({}));o(this,"onFocus",t=>this.mask.event.onFocus(t));o(this,"onBlur",t=>this.mask.event.onBlur(t));o(this,"onKeydown",t=>this.mask.event.onKeydown(t));o(this,"onKeyup",t=>this.mask.event.onKeyup(t));o(this,"onBeforeinput",t=>this.mask.event.onBeforeinput(t));o(this,"onInput",t=>this.mask.event.onInput(t));o(this,"onChange",t=>this.mask.event.onChange(t));o(this,"onPaste",t=>this.mask.event.onPaste(t));o(this,"onClick",t=>this.mask.event.onClick(t));this.mask=new Hs(t,e,(a,h,c)=>{a==="input"&&this.updateValue(),s(a,h,c)},i),r.watchEffect(()=>{this.mask.reset(t==null?void 0:t.value),this.updateValue()})}updateValue(){const t=this.mask.getValueBasic(),e=t!==this.valueBasic.value;return this.valueBasic.value=t,this.value.value=this.mask.value.get(),this.view.value=this.mask.view.get(),e&&this.mask.goSelection(),this.classes.value=this.mask.getClasses(),this}}class Ws extends y{constructor(e,s,i){super(e,s,i);o(this,"mask");this.mask=new zs(s,this.element,(a,h,c)=>{var u;(u=this.emits)==null||u.call(this,a,h,c)},this.getSubClass(["character","item"])),this.init()}renderData(){var s;const e=this.setup();if((s=this.props)!=null&&s.name)return r.h("input",{type:"hidden",name:this.props.name,value:e.value.value})}renderInput(){const e=this.setup();return r.h("input",{ref:this.element,class:e.classes.value.input,value:e.valueBasic.value,onFocus:e.onFocus,onBlur:e.onBlur,onKeydown:e.onKeydown,onKeyup:e.onKeyup,onBeforeinput:e.onBeforeinput,onInput:e.onInput,onChange:e.onChange,onPaste:e.onPaste,onClick:e.onClick})}renderView(){const e=this.setup(),s=e.view.value;if(s.length>0){const i=[];return s.forEach((a,h)=>{i.push(r.h("span",{key:h,class:a.className},a.value))}),r.h("span",{class:e.classes.value.character},i)}return r.h("span",{class:e.classes.value.character,innerHTML:"&nbsp;"})}makeOptions(){return this}initSetup(){return{valueBasic:this.mask.valueBasic,value:this.mask.value,view:this.mask.view,onFocus:this.mask.onFocus,onBlur:this.mask.onBlur,onKeydown:this.mask.onKeydown,onKeyup:this.mask.onKeyup,onBeforeinput:this.mask.onBeforeinput,onInput:this.mask.onInput,onChange:this.mask.onChange,onPaste:this.mask.onPaste,onClick:this.mask.onClick}}initExpose(){return{}}initClasses(){return{main:{...this.toClassName(this.mask.classes.value)},input:this.getSubClass("input"),character:this.getSubClass("character"),characterItem:this.getSubClass("character__item")}}initStyles(){return{}}initRender(){const e=this.setup(),s=[this.renderData(),this.renderInput(),this.renderView()];return r.h("label",{...this.getAttrs(),class:e.classes.value.main},s)}}const b={special:"*",match:/[0-9]/,type:"text",view:"_"},Ks={type:{type:String,default:b==null?void 0:b.type},name:String,value:[String,Number],mask:[String,Array],special:{type:[String,Array,Object],default:b==null?void 0:b.special},match:{type:[String,RegExp],default:b==null?void 0:b.match},pattern:Object,check:Object,fraction:[String,Boolean,Number],currency:String,language:String,view:{type:String,default:b==null?void 0:b.view},visible:Boolean,right:Boolean,dir:String},qs={dir:["ltr","rtl"]},Ys={...Ks,visible:Boolean,right:Boolean,dir:String},Us=r.defineComponent({name:"M3Mask",__name:"M3Mask",props:{...Ys},emits:["focus","blur","keydown","keyup","beforeinput","input","change","paste","reset"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-mask":!0,"m3-mask--visible":i.visible,"m3-mask--right":i.right,[`m3-mask--dir--${i.dir}`]:l.inArray(qs.dir,i.dir)}})),h=r.computed(()=>({})),c=new Ws("m3.mask",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),vt="d-mutation",Gs=g.toKebabCase(l.useEnv("DESIGNS_MAIN","design")),Xs=g.toKebabCase(l.useEnv("DESIGNS_GLOBAL","ui")),Rt="init",Nt="end",V="__UI_PROJECT";var x=(n=>(n.new="new",n[n.init=Rt]="init",n[n.end=Nt]="end",n))(x||{});class S{static getKeyUi(){return Xs}static getKeyInit(){return Rt}static getKeyEnd(){return Nt}static getAttributeUi(){return`data-${this.getKeyUi()}`}static getClassInit(){return`${vt}--${this.getKeyInit()}`}static getClassEnd(){return`${vt}--${this.getKeyEnd()}`}static find(t=document.body,e=x.new){const s=[];if("querySelector"in t){const i=this.getSelectorByStatus(e);t.querySelector(i)&&t.querySelectorAll(i).forEach(a=>s.push(a))}return s}static closestInit(t){var e,s;return!!((e=t==null?void 0:t.closest)!=null&&e.call(t,this.getSelectorInit())||!((s=t==null?void 0:t.closest)!=null&&s.call(t,"body")))}static getSelectorNew(){return`*[${this.getAttributeUi()}]:not(.${this.getClassInit()}):not(.${this.getClassEnd()})`}static getSelectorInit(){return`*[${this.getAttributeUi()}].${this.getClassInit()}`}static getSelectorEnd(){return`*[${this.getAttributeUi()}].${this.getClassEnd()}`}static getSelectorByStatus(t){switch(t){case x.init:return`${this.getSelectorInit()}, ${this.getSelectorEnd()}`;case x.end:return this.getSelectorEnd();default:return this.getSelectorNew()}}}class I{static isFunction(t){return t in this.functions}static isClass(t){return t in this.classes}static isComponent(t){return t in this.components}static getComponentList(){return this.components}static getComponentGlobal(){return V in window?window[V]:{}}static getComponentGlobalItem(t){var e;if(V in window)return((e=window[V])==null?void 0:e[t])??void 0}static getComponentVue(t){if(t in this.components)return this.components[t]}static getComponentItem(t){if(t in this.compItems)return this.compItems[t].item}static addFunction(t,e){this.isFunction(t)||(this.functions[t]=e)}static addClass(t,e){this.isClass(t)||(this.classes[t]=e)}static addComponent(t,e){this.isComponent(t)||(this.components[t]=e)}static addFunctionList(t){l.forEach(t,(e,s)=>{this.addFunction(s,e)})}static addClassList(t){l.forEach(t,(e,s)=>{this.addClass(s,e)})}static addComponentList(t){l.forEach(t,(e,s)=>{this.addComponent(s,e)})}static registrationComponent(t,e,s){if(this.compItems[t]={item:e,callback:s},t in this.compCaching){const i=this.compCaching[t];return delete this.compCaching[t],i}}static comp(t,e){t in this.compItems?this.compItems[t].callback(e):this.compCaching[t]=e}static removeComponent(t){t in this.compItems&&delete this.compItems[t]}}o(I,"functions",{}),o(I,"classes",{}),o(I,"components",{}),o(I,"compItems",{}),o(I,"compCaching",{});class Dt{constructor(t){o(this,"id");o(this,"componentName");o(this,"static");o(this,"slots",{});o(this,"props",{});o(this,"callback");var e;this.element=t,this.id=g.getElementId(t),this.componentName=((e=t.dataset)==null?void 0:e[S.getKeyUi()])??"component",this.static=x.new,this.slots=this.initSlots(),this.setStatus(x.init),this.element.classList.add(this.getClassMain())}is(t){return this.element===t}isLink(){return!!this.componentName.match("/")}getId(){return this.id}getComponentName(){if(this.isLink())return this.componentName;const t=g.toCamelCaseFirst(this.componentName);return I.isComponent(t)?t:g.toCamelCaseFirst(`${Gs}-${this.componentName}`)}getDesign(){return g.toKebabCase(this.getComponentName()).replace(/-.*?$/,"")}getClassMain(){return`${this.getDesign()}-init`}getElement(){return this.element}getStatus(){return this.static}getProps(){return{...this.getDataset(),...this.props}}getSlots(){return this.slots}setStatus(t){switch(this.removeClasses(),this.static=t,this.static){case x.init:this.element.classList.add(S.getClassInit());break;case x.end:this.element.classList.add(S.getClassEnd());break}return this}registration(t,e){const s=I.registrationComponent(this.getId(),t,i=>{l.isFilled(i)&&this.setProps(i).update()});return s&&this.setProps(s),this.callback=e,this}update(){var t;return(t=this.callback)==null||t.call(this,this.getProps()),this}disconnect(){return I.removeComponent(this.getId()),this}getDataset(){const t={};return l.forEach(this.element.dataset,(e,s)=>{s!==S.getKeyUi()&&(t[s]=l.transformation(e))}),t}setProps(t){return l.isFilled(t)&&l.forEach(t,(e,s)=>{s==="slots"?this.setSlots(e):this.props[s]=e}),this}setSlots(t){return l.isFilled(t)&&l.forEach(t,(e,s)=>{this.slots[s]=this.initChildrenList(l.toArray(e))}),this}initSlots(){const t={},e=[];for(const s of this.element.children){const i=s.getAttribute("data-slot");if(i)t[i]=this.initChildrenList(s.childNodes);else{const a=this.initChildren(s);a&&("default"in t?t.default.push(a):t.default=[a])}e.push(s)}for(const s of e)this.element.removeChild(s);return t}initChildrenList(t){const e=[];for(const s of t){const i=this.initChildren(s);i&&e.push(i)}return e}initChildren(t){var s,i;if(t instanceof HTMLElement)return{tag:t.nodeName,attributes:{...g.getAttributes(t),innerHTML:(t==null?void 0:t.innerHTML)??""}};const e=(i=(s=t==null?void 0:t.textContent)==null?void 0:s.trim)==null?void 0:i.call(s);if(l.isFilled(e))return e;if(l.isString(t)&&l.isFilled(t))return t}removeClasses(){return this.element.classList.remove(S.getClassInit()),this.element.classList.remove(S.getClassEnd()),this}}class Js{constructor(){o(this,"items",[])}is(t){return!!this.getItem(t)}isComponent(t){var e;return!!((e=t.dataset)!=null&&e[S.getKeyUi()])}get(){return this.items}getItem(t){var e;return(e=this.items)==null?void 0:e[this.find(t)]}add(t){return this.isComponent(t)&&!this.is(t)&&!S.closestInit(t)&&this.items.push(new Dt(t)),this}remove(t){const e=this.find(t);return e>=0&&(this.items[e].disconnect(),this.items.splice(e,1)),this}find(t){return this.items.findIndex(e=>e.is(t))}}class Qs{constructor(t,e){o(this,"mutation");this.addCallback=t,this.removeCallback=e}start(){return this.mutation||(this.mutation=new MutationObserver(t=>this.callback(t)),this.mutation.observe(document.body,{attributes:!1,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!0})),this}end(){return this.mutation&&(this.mutation.disconnect(),this.mutation=void 0),this}callback(t){t.forEach(e=>{e.removedNodes.forEach(s=>this.removeCallback(s)),e.addedNodes.forEach(s=>this.addCallback(s))})}}class Zs{constructor(t,e){o(this,"mutation");this.items=t,this.update=e}start(){this.mutation&&this.end();const t=this.items.get();if(t.length>0){this.mutation=new MutationObserver(e=>this.callback(e));for(const e of t)this.mutation.observe(e.getElement(),{attributes:!0,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1,childList:!1,subtree:!1})}return this}end(){return this.mutation&&(this.mutation.disconnect(),this.mutation=void 0),this}callback(t){t.forEach(e=>{e.type==="attributes"&&this.update(e.target)})}}class ti{constructor(t){o(this,"mutationGlobal");o(this,"mutationItems");o(this,"items",new Js);this.callback=t,this.mutationGlobal=new Qs(e=>this.add(e),e=>this.remove(e)),this.mutationItems=new Zs(this.items,e=>{var s;return(s=this.items.getItem(e))==null?void 0:s.update()})}start(){return this.addList(),this.mutationGlobal.start(),this.mutationItems.start(),this}stop(){return this.mutationGlobal.end(),this}add(t){this.items.add(t),this.addList(t),this.callback(),this.mutationItems.start()}addList(t=document.body){S.find(t).forEach(e=>this.items.add(e))}remove(t){this.items.remove(t),this.removeList(t),this.callback(),this.mutationItems.start()}removeList(t=document.body){S.find(t,x.init).forEach(e=>this.items.remove(e))}}class ei{constructor(){o(this,"mutation");o(this,"items",r.shallowRef([]));this.mutation=new ti(()=>this.update()),r.onBeforeMount(async()=>{await r.nextTick(),requestAnimationFrame(()=>{this.mutation.start(),this.update()})}),r.onUnmounted(()=>this.mutation.stop())}update(){return this.items.value=[...this.mutation.items.get()],this}}class Vt extends y{constructor(e,s,i){super(e,s,i);o(this,"mutation");this.mutation=new ei,this.init()}makeOptions(){return this}initSetup(){return{items:this.mutation.items}}initExpose(){return{items:this.setup().items}}initClasses(){return{main:{}}}initStyles(){return{}}initRender(){const e=this.setup(),s=[];return this.components.is("item")&&e.items.value.forEach(i=>{this.components.renderAdd(s,"item",{item:i},void 0,i.getId())}),r.h("div",{...this.getAttrs(),ref:this.element,class:e.classes.value.main},s)}}class si{constructor(t,e){o(this,"mainElement",document.body);o(this,"componentName","div");o(this,"componentItem",r.shallowRef());o(this,"binds",r.shallowRef({}));o(this,"slots",r.shallowRef({}));var s;this.props=t,t.item&&(this.mainElement=t.item.getElement(),this.componentName=t.item.getComponentName(),t.item.registration(e,()=>this.update()),this.initComponentItem().then(i=>{this.componentItem.value=i})),(s=t.item)==null||s.setStatus(x.end),this.update()}update(){var e,s;const t=(e=this.props.item)==null?void 0:e.getSlots();return this.binds.value={...((s=this.props.item)==null?void 0:s.getProps())??{}},this.slots.value=t?{...t}:void 0,this}getComponentGlobalItem(){var t;return(t=I.getComponentGlobalItem(this.componentName))==null?void 0:t.item}async initComponentItem(){return new Promise(t=>{var s;const e=this.getComponentGlobalItem();if(e)t(e);else if((s=this.props.item)!=null&&s.isLink()){let i=24;const a=setInterval(()=>{if(console.log("repeat",this.componentName),i-- >0){const h=this.getComponentGlobalItem();h&&(clearInterval(a),t(h))}else clearInterval(a),t(r.resolveComponent(this.componentName))},64)}else t(r.resolveComponent(this.componentName))})}}class jt extends y{constructor(e,s,i){super(e,s,i);o(this,"mutation");this.mutation=new si(s,this.element),this.init()}makeOptions(){return this}initSetup(){return{mainElement:this.mutation.mainElement,componentName:this.mutation.componentName,componentItem:this.mutation.componentItem,binds:this.mutation.binds,slots:this.mutation.slots,renderSlots:r.computed(()=>this.renderSlots())}}initExpose(){return{}}initClasses(){return{main:{}}}initStyles(){return{}}initRender(){var s;const e=this.setup();if(e.componentItem.value)return r.h(r.Teleport,{ref:this.element,class:(s=this.classes)==null?void 0:s.value.main,to:e.mainElement},[r.h(e.componentItem.value,e.binds.value,e.renderSlots.value)])}renderSlots(){const e=this.setup(),s={},i=e.slots.value;return i&&l.forEach(i,(a,h)=>{const c=[];let u=!1;a.forEach(d=>{typeof d=="string"?c.push(d):c.push(r.h(d.tag,{...d.attributes}))}),s[h]=d=>{var p,C;if(!u&&d){const M=c==null?void 0:c[0];M&&"UI"in window&&l.isObjectNotArray(M)&&((p=M.props)!=null&&p["data-ui"])&&(window.UI.comp((C=M.props)==null?void 0:C.id,d),u=!0)}return c}}),s}}const Pt={item:Dt},ii={...Pt},Ht=r.defineComponent({name:"M3MutationItem",__name:"M3MutationItem",props:{...ii},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-mutationItem":!0}})),h=r.computed(()=>({})),c=new jt("m3.mutationItem",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),zt={disabled:Boolean},ni={...zt},ri=r.defineComponent({name:"M3Mutation",__name:"M3Mutation",props:{...ni},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-mutation":!0}})),h=r.computed(()=>({})),c=new Vt("m3.mutation",i,{emits:s,components:{item:Ht},classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}});class at{static async is(){const t=await this.get();return t!==-1&&t<=8}static async get(){const t=this.storage.get()??-1;if(!this.calculate&&t===-1){const e=await this.init();return this.storage.set(e),e}return t}static createElement(){return g.createElement(document.body,"div",t=>{t.style.height="24px",t.style.overflowY="scroll",t.style.position="fixed",t.style.width="100%",g.createElement(t,"div",e=>{e.style.height="100px"})})}static init(){return new Promise(t=>{this.calculate=!0;const e=this.createElement();requestAnimationFrame(()=>{t(e.offsetWidth-e.clientWidth),e.remove(),this.calculate=!1})})}}o(at,"storage",new l.DataStorage("scrollbar",!0)),o(at,"calculate",!1);const kt=8;class ai{constructor(t,e,s){o(this,"event");o(this,"top",!1);o(this,"bottom",!1);this.props=t,this.element=e,this.callback=s}getClasses(){return{"??--border--top":this.top,"??--border--bottom":this.bottom}}start(){return this.event?this.event.start():this.event=new g.EventItem(this.element.value,["scroll-sync"],()=>this.on()).start(),this.on(),this}stop(){return this.event&&this.event.stop(),this}toggle(){return this.props.border?this.start():this.stop(),this}reset(){return this.event&&this.event.setElement(this.element.value),this.toggle()}setData(t,e){return(this.top!==t||this.bottom!==e)&&(this.top=t,this.bottom=e,this.callback&&this.callback()),this}on(){const t=this.element.value;t&&this.setData(t.scrollTop>kt,t.scrollTop<t.scrollHeight-t.clientHeight-kt)}}class oi{constructor(t,e,s){o(this,"border");this.border=new ai(t,e,s)}async getClasses(){return{"??--disabled":await this.getDisabled(),...this.border.getClasses()}}async getDisabled(){return await at.is()}}class hi{constructor(t,e){o(this,"scrollbar");o(this,"classes",r.ref({}));this.scrollbar=new oi(t,e,()=>this.updateClasses().then()),r.watchEffect(async()=>{this.scrollbar.border.reset(),await this.updateClasses()}),r.onMounted(async()=>{await r.nextTick(),requestAnimationFrame(()=>this.scrollbar.border.toggle())})}async updateClasses(){return this.classes.value=await this.scrollbar.getClasses(),this}}class ci extends y{constructor(e,s,i){super(e,s,i);o(this,"scrollbar");this.scrollbar=new hi(this.props,this.element),this.init()}makeOptions(){return this}initSetup(){return{}}initExpose(){return{}}initClasses(){return{main:{...this.toClassName(this.scrollbar.classes.value)}}}initStyles(){return{}}initRender(){const e=this.setup(),s=[this.initSlot("default")];return r.h(this.props.tag,{...this.getAttrs(),ref:this.element,class:e.classes.value.main},s)}}const li={tag:"div"},ui={tag:{type:String,default:li.tag},visible:Boolean,border:Boolean,inverse:Boolean},di={...ui,visible:Boolean,border:Boolean,inverse:Boolean},Wt=r.defineComponent({name:"M3Scrollbar",__name:"M3Scrollbar",props:{...di},setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-scrollbar":!0,"m3-scrollbar--visible":i.visible,"m3-scrollbar--border":i.border,"m3-scrollbar--inverse":i.inverse}})),h=r.computed(()=>({})),c=new ci("m3.scrollbar",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}});var k=(n=>(n.display="display",n.preparation="preparation",n.flash="flash",n.open="open",n.hide="hide",n.close="close",n))(k||{}),D=(n=>(n.block="block",n.close="close",n.static="static",n.controlStatic="controlStatic",n))(D||{}),j=(n=>(n.top="top",n.center="center",n.bottom="bottom",n))(j||{});class gi{constructor(){o(this,"status",k.close)}isHide(){return this.status===k.hide}isOpen(){return this.status===k.open||this.status===k.flash}get(){return this.status}set(t){return this.status=t,this}toDisplay(){return this.set(k.display),this}toPreparation(){return this.set(k.preparation),this}toFlash(){return this.set(k.flash),this}toOpen(){return this.set(k.open),this}toHide(){return this.set(k.hide),this}toClose(){return this.set(k.close),this}}class pi{constructor(){o(this,"x",0);o(this,"y",0)}is(){return this.x!==0||this.y!==0}getX(){return this.x}getY(){return this.y}getShiftX(t){return this.x-t}getShiftY(t){return this.y-t}set(t,e){return this.x=t,this.y=e,this}reset(){return this.x=0,this.y=0,this}}class mi{constructor(t,e){o(this,"persistent",!1);this.props=t,this.callback=e}get(){return this.persistent}on(){return this.props.persistent?(this.persistent=!0,this.makeCallback(),!0):!1}disabled(){return this.persistent&&(this.persistent=!1,this.makeCallback()),this}makeCallback(){return this.callback&&this.callback(),this}}class fi{constructor(t){this.props=t}async preparation(t){this.props.preparation&&await this.props.preparation(t)}async beforeOpening(t){return this.props.beforeOpening?await this.props.beforeOpening(!t):!0}async opening(t){return this.props.opening?await this.props.opening(t):!1}}class yi{constructor(t,e="is-window",s="is-control",i="is-body",a="is-body-context"){o(this,"id",`window--${g.getElementId()}`);this.persistent=t,this.className=e,this.classControl=s,this.classBody=i,this.classBodyContext=a}isWindow(t){return!!(t&&t.classList.contains(this.getClassMain()))}getId(){return this.id}getClassMain(){return this.className}getClassControl(){return this.classControl}getClassControlAndId(){return`${this.classControl} ${this.getId()}`}getClassStatus(t){return`${this.className}[data-status="${t}"]`}getClasses(){return{[this.getId()]:!0,"??--persistent":this.persistent.get()}}getSelectorControl(){return`.${this.classControl}.${this.getId()}`}getSelectorStatusControl(t){return`.${this.getClassMain()}--${t}`}findMain(t){return(t==null?void 0:t.closest(`.${this.className}`))??void 0}findControl(){return document.querySelector(`.${this.classControl}.${this.id}`)||void 0}findControlByElement(t){var e;if(t)return document.querySelector(`.${this.getClassControl()}.${(e=t.dataset)==null?void 0:e.window}`)??void 0}findBody(){return document.querySelector(`.${this.className}.${this.id} .${this.classBody}`)||void 0}findBodyContext(){return document.querySelector(`.${this.className}.${this.id} .${this.classBodyContext}`)||void 0}}class bi{constructor(t,e){this.classes=t,this.element=e}isMain(){return!!this.element.value}getMain(){return this.element.value}getControl(){return this.classes.findControl()}getControlRect(){var t;return((t=this.getControl())==null?void 0:t.getBoundingClientRect())||void 0}getBody(){return this.classes.findBody()}getBodyRect(){var t;return((t=this.getBody())==null?void 0:t.getBoundingClientRect())||void 0}getBodyContext(){return this.classes.findBodyContext()}}class vi{constructor(t,e){o(this,"control",!1);this.props=t,this.classes=e}is(){return!!this.props.flash}isOpen(){return this.is()||this.control}isClose(){return this.is()||!!document.querySelector(`.${this.classes.getClassStatus(k.hide)}`)}setControl(t){var e;return this.control=((e=t==null?void 0:t.closest(`.${this.classes.getClassControl()}`))==null?void 0:e.dataset.window)===this.classes.getId(),this}}class ki{constructor(t,e){o(this,"top",0);o(this,"right",0);o(this,"bottom",0);o(this,"left",0);o(this,"width",0);o(this,"height",0);o(this,"innerWidth",0);o(this,"innerHeight",0);o(this,"padding",0);o(this,"location",j.center);this.classes=t,this.element=e}getTop(){return this.top}getRight(){return this.right}getBottom(){return this.bottom}getLeft(){return this.left}getWidth(){return this.width}getHeight(){return this.height}getInnerWidth(){return this.innerWidth}getInnerHeight(){return this.innerHeight}getPadding(){return this.padding}getLocation(){return this.location}getMaxHeight(){const t=this.element.getBody();return t?parseInt(getComputedStyle(t).maxHeight.replace(/[^0-9]+/g,"")):0}update(){const t=this.element.getMain(),e=this.element.getControlRect();return t&&e&&(this.top!==e.top||this.right!==e.right||this.bottom!==e.bottom||this.left!==e.left||this.width!==t.offsetWidth||this.height!==t.offsetHeight||this.innerWidth!==window.innerWidth||this.innerHeight!==window.innerHeight)?(this.top=e.top,this.right=e.right,this.bottom=e.bottom,this.left=e.left,this.width=t.offsetWidth,this.height=t.offsetHeight,this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.padding=(window.innerHeight-this.getMaxHeight())/2,this.location=this.initLocation(e.top+e.height/2),!0):!1}reset(){return this.top=0,this.right=0,this.bottom=0,this.left=0,this.width=0,this.height=0,this.innerWidth=0,this.innerWidth=0,this}initLocation(t){switch(Math.floor(t/(window.innerHeight/3))){case 0:return j.top;case 2:return j.bottom}return j.center}}class Ci{constructor(t,e,s,i){o(this,"x",0);o(this,"y",0);this.props=t,this.client=e,this.element=s,this.coordinates=i}isOver(){var t;return((t=this.props)==null?void 0:t.axis)==="on"}getX(){return this.x}getY(){return this.y}getStyleX(){return`${this.x}px`}getStyleY(){return`${this.y}px`}getStyles(){return{"--??-sys-inset-x":this.getStyleX(),"--??-sys-inset-y":this.getStyleY()}}update(){return this.coordinates.update()?(this.setX(),this.setY(),!0):!1}updateScroll(){var e,s,i;const t=this.element.getBodyContext();if(this.isOver()&&this.props.overElement&&t&&t.scrollHeight>t.offsetHeight){const a=(e=g.getElement(this.props.overElement))==null?void 0:e.getBoundingClientRect(),h=(s=this.element.getBody())==null?void 0:s.getBoundingClientRect(),c=t==null?void 0:t.getBoundingClientRect(),u=(i=this.element.getControl())==null?void 0:i.getBoundingClientRect();if(t&&a&&h&&c){const d=a.height/2,p=a.top-c.top;if(u&&this.coordinates.getMaxHeight()===h.height){if(u.top+d<h.top){t.scrollTop+=p;return}if(u.bottom-d>h.bottom){t.scrollTop+=p-c.height+a.height;return}t.scrollTop+=p-(u.top-c.top)-u.height/2+d;return}t.scrollTop+=p-c.height/2+d}}}getAxis(){var t;return this.isOver()?"y":((t=this.props)==null?void 0:t.axis)??"y"}getIndent(t){return this.getAxis()===t?this.props.indent??4:0}getOverHeight(t,e){var a,h;const s=(e-t)/2;if(this.props.overElement){const c=(a=g.getElement(this.props.overElement))==null?void 0:a.getBoundingClientRect(),u=(h=this.element.getBody())==null?void 0:h.getBoundingClientRect();if(c&&u){const d=c.top-u.top,p=c.height/2;return e-d-p-s}}const i=this.coordinates.getHeight()/2;return e-s-i}setX(){const t=this.element.getMain();if(t){const e=this.getIndent("x"),s=this.props.contextmenu?this.client.getX():this.coordinates.getRight()+e,i=this.props.contextmenu?this.client.getX():this.coordinates.getLeft()-e,a=[];this.getAxis()==="x"?a.push(s,i):a.push(i,s),this.x=this.calculationInner(a[0],a[1],t.offsetWidth,window.innerWidth,this.coordinates.getWidth())}return this}setY(){const t=this.element.getMain();if(t){const e=this.getIndent("y"),s=this.props.contextmenu?this.client.getY():this.coordinates.getTop()-e,i=this.props.contextmenu?this.client.getY():this.coordinates.getBottom()+e,a=[];if(this.isOver())return this.y=this.calculationOver(this.getOverHeight(s,i),s,i,t.offsetHeight,window.innerHeight),this;this.getAxis()!=="x"?a.push(i,s):a.push(s,i),this.y=this.calculationInner(a[0],a[1],t.offsetHeight,window.innerHeight,this.coordinates.getHeight())}return this}calculationInner(t,e,s,i,a){const h=this.coordinates.getPadding();return t+s<=i-h?t:e-s>h?e-s:i/2-a/2}calculationOver(t,e,s,i,a){const h=this.coordinates.getPadding();if(s<h)return s;if(e>a-h){const c=e-i-h;return c<h?h:c}return t<h?h:t+i<=a-h?t:a-i-h}}class wi{constructor(t,e,s){o(this,"x",null);o(this,"y",null);this.client=t,this.element=e,this.position=s}getStyleX(){return this.x!==null?`${this.x}px`:null}getStyleY(){return this.y!==null?`${this.y}px`:null}getStyles(){return{"--??-origin-x":this.getStyleX(),"--??-origin-y":this.getStyleY()}}update(){const t=this.element.getMain();if(!this.client.is())this.x=0,this.y=0;else if(t&&getComputedStyle(t).content!=='"--MENU--"'){const e=this.element.getBodyRect();e&&(this.x=this.client.getShiftX(e.left),this.y=this.client.getShiftY(e.top))}else this.x=this.client.getShiftX(this.position.getX()),this.y=this.client.getShiftY(this.position.getY());return this}reset(){return this.x=null,this.y=null,this}}class Bi{constructor(t,e,s){o(this,"activity",!1);o(this,"event");this.props=t,this.element=e,this.callback=s}is(){return this.activity}isStaticMod(){return!!this.props.staticMode}update(){const t=this.isStatic();return t!==this.activity?(this.activity=t,!0):!1}make(){this.isStaticMod()?!this.event&&this.element.getMain()&&(this.event=new g.EventItem(window,["resize"],()=>this.listener()),this.listener(),this.event.start()):this.stop()}makeAdaptive(){this.props.adaptive&&this.props.staticMode&&this.element.getMain()&&requestAnimationFrame(()=>this.listener())}stop(){this.event&&(this.event.stop(),this.event=void 0)}isStatic(){const t=this.element.getMain();return!!(t&&getComputedStyle(t).content==='"--STATIC--"')}listener(){var t;this.update()&&((t=this.callback)==null||t.call(this))}}class Si{constructor(t,e,s,i,a,h,c,u,d,p,C){o(this,"open",!1);o(this,"first",!1);this.props=t,this.status=e,this.client=s,this.hook=i,this.element=a,this.flash=h,this.coordinates=c,this.position=u,this.origin=d,this.callback=p,this.callbackEmit=C}inDom(){return this.open||this.props.staticMode||this.first&&!!this.props.inDom}get(){return this.open}async set(t=!0){return this.open!==t&&await this.toggle(),this}async toggle(){if(await this.hook.beforeOpening(this.open)){const t=!this.open;t?(this.reset(),this.status.toDisplay(),await this.setOpenAndEmit(t),requestAnimationFrame(async()=>{await this.hook.preparation(this.open),await this.watchPosition(),await this.callback(),requestAnimationFrame(async()=>{this.position.updateScroll(),this.status.toPreparation(),await this.callback(),requestAnimationFrame(async()=>{await this.hook.opening(this.open),this.flash.isClose()?this.status.toFlash():this.status.toOpen(),await this.callback()})})})):(this.client.reset(),this.flash.isOpen()?this.toClose():(this.status.toHide(),await this.callback()))}return this}close(){this.status.isHide()&&this.toClose()}reset(){return this.coordinates.reset(),this.origin.reset(),this}async watchPosition(){this.open&&this.element.isMain()?(this.position.update(),this.origin.update(),this.watchCoordinates()):this.reset()}async setOpenAndEmit(t){return this.open=t,t&&!this.first&&(this.first=!0),await this.callback(),this.callbackEmit(),this}watchCoordinates(){return g.frame(()=>{const t=this.element.getMain();t&&getComputedStyle(t).content==='"--MENU--"'&&this.position.update()&&this.callback().then()},()=>this.open&&!this.status.isHide()),this}toClose(){setTimeout(()=>this.setOpenAndEmit(!1).then(),48),this.status.toClose(),this.hook.opening(this.open).then()}}class Ii{constructor(t,e,s,i,a,h,c){o(this,"target");o(this,"focus");this.props=t,this.persistent=e,this.classes=s,this.element=i,this.staticMode=a,this.open=h,this.callback=c}async update(t){this.target=t,this.focus=this.getFocus(),!this.staticMode.is()&&(this.open.get()?this.isContextmenu()?(await this.open.reset().watchPosition(),await this.callback()):this.focus===null?await this.open.toggle():this.isFocus()?this.isTarget()?this.persistent.on()||await this.open.toggle():(this.isClose()||this.isAutoClose()||!this.isChildren())&&await this.open.toggle():this.isNotBlock()&&(this.isChildren()?requestAnimationFrame(async()=>{var e;["open","flash"].indexOf(((e=this.focus)==null?void 0:e.dataset.status)||"")===-1&&await this.open.toggle()}):await this.open.toggle()):this.isEnabled()&&await this.open.toggle())}getFocus(){return this.classes.findMain(this.getTarget())}getTarget(){return this.target??this.element.getMain()??document.body}isFocus(){return this.element.getMain()===this.focus}isTarget(){return this.element.getMain()===this.target}isChildren(t=this.getTarget()){const e=this.classes.findMain(t);return!!(e&&(e.dataset.window===this.classes.getId()||this.isChildren(this.classes.findControlByElement(e))))}isEnabled(){const t=this.classes.getSelectorStatusControl(D.controlStatic);return!this.props.disabled&&!this.getTarget().closest(t)}isAutoClose(){const t=this.classes.getSelectorStatusControl(D.static);return!!this.props.autoClose&&!this.getTarget().closest(`${t}, .${this.classes.getId()} .${this.classes.getClassControl()}`)}isNotBlock(){var e;const t=this.classes.getSelectorStatusControl(D.block);return!this.classes.isWindow(this.getTarget())&&!((e=this.classes.findControlByElement(this.focus))!=null&&e.closest(t))}isContextmenu(){return!!(this.props.contextmenu&&this.getTarget().closest(this.classes.getSelectorControl()))}isClose(){const t=this.classes.getSelectorStatusControl(D.close),e=this.classes.getSelectorStatusControl(D.static);return!!this.getTarget().closest(`${t}:not(${e})`)}}class xi{constructor(t,e,s,i,a,h,c){o(this,"event");this.props=t,this.status=e,this.client=s,this.persistent=i,this.flash=a,this.open=h,this.verification=c,this.event=new g.EventItem("body",["click","contextmenu"],u=>this.onGlobal(u))}async onClick(t){this.props.contextmenu||await this.on(t)}async onContextmenu(t){this.props.contextmenu&&(t.preventDefault(),await this.on(t))}onTransition(){this.open.close()}onPersistent(){this.persistent.disabled()}start(){return this.event.start(),this}stop(){return this.event.stop(),this}toggle(){return this.open.get()&&this.status.isOpen()?this.start():this.stop(),this}async on(t){this.client.set(g.getClientX(t),g.getClientY(t)),await this.verification.update(t.target)}async onGlobal(t){this.open.get()?(this.flash.setControl(t==null?void 0:t.target),await this.verification.update(t==null?void 0:t.target)):this.event.stop()}}class Mi{constructor(t,e,s,i,a="is-window",h="is-control",c="is-body",u="is-body-context"){o(this,"status");o(this,"client");o(this,"persistent");o(this,"hook");o(this,"classes");o(this,"element");o(this,"flash");o(this,"coordinates");o(this,"position");o(this,"origin");o(this,"staticMode");o(this,"open");o(this,"verification");o(this,"event");this.status=new gi,this.client=new pi,this.persistent=new mi(t,s),this.hook=new fi(t),this.classes=new yi(this.persistent,a,h,c,u),this.element=new bi(this.classes,e),this.flash=new vi(t,this.classes),this.coordinates=new ki(this.classes,this.element),this.position=new Ci(t,this.client,this.element,this.coordinates),this.origin=new wi(this.client,this.element,this.position),this.staticMode=new Bi(t,this.element,s),this.open=new Si(t,this.status,this.client,this.hook,this.element,this.flash,this.coordinates,this.position,this.origin,async()=>{await s(),this.event.toggle()},()=>i(this.getEmitOptions())),this.verification=new Ii(t,this.persistent,this.classes,this.element,this.staticMode,this.open,s),this.event=new xi(t,this.status,this.client,this.persistent,this.flash,this.open,this.verification),t.open&&requestAnimationFrame(()=>this.open.set(t.open).then())}getClasses(){return{...this.classes.getClasses(),"??--staticMode":this.staticMode.is(),[`??--location--${this.coordinates.getLocation()}`]:!0}}getStyles(){return{...this.origin.getStyles(),...this.position.getStyles()}}getEmitOptions(){return{id:this.classes.getId(),element:this.element.getMain(),control:this.element.getControl(),open:this.open.get()}}update(){return this.staticMode.make(),this.staticMode.makeAdaptive(),this}stop(){return this.event.stop(),this.staticMode.stop(),this}}class Ti{constructor(t,e,s,i="is-window",a="is-control",h="is-body",c="is-body-context"){o(this,"window");o(this,"status",r.shallowRef());o(this,"staticMode",r.shallowRef(!1));o(this,"inDom",r.shallowRef(!1));o(this,"open",r.shallowRef(!1));o(this,"classes",r.shallowRef({}));o(this,"styles",r.shallowRef({}));this.window=new Mi(t,e,async()=>this.update(),s,i,a,h,c),r.watchEffect(async()=>await this.window.open.set(t.open)),r.watchEffect(async()=>{this.window.update(),await this.update()}),r.onUnmounted(()=>this.window.stop())}getId(){return this.window.classes.getId()}getClassControl(){return this.window.classes.getClassControlAndId()}async setOpen(t=!0){await this.window.open.set(t)}async toggle(){await this.window.open.toggle()}async onClick(t){return this.window.event.onClick(t)}async onContextmenu(t){return this.window.event.onContextmenu(t)}onTransition(){return this.window.event.onTransition()}onPersistent(){return this.window.event.onPersistent()}async update(){this.status.value=this.window.status.get(),this.staticMode.value=this.window.staticMode.is(),this.inDom.value=this.window.open.inDom(),this.open.value=this.window.open.get(),this.updateClasses(),await r.nextTick()}updateClasses(){return this.classes.value=this.window.getClasses(),this.styles.value=this.window.getStyles(),this}}class Ei extends y{constructor(e,s,i){super(e,s,i);o(this,"window");this.window=new Ti(this.props,this.element,a=>{var h;return(h=this.emits)==null?void 0:h.call(this,"window",a)},this.getName(),this.getSubClass("control"),this.getSubClass("body"),this.getSubClass(["body","context"])),this.init()}makeOptions(){return this}initSetup(){return{id:this.window.getId(),status:this.window.status,open:this.window.open,inDom:this.window.inDom,staticMode:this.window.staticMode,slotControl:{class:this.window.getClassControl(),onclick:async e=>await this.window.onClick(e),oncontextmenu:async e=>this.window.onContextmenu(e)},setOpen:e=>this.window.setOpen(e),toggle:()=>this.window.toggle(),onTransition:()=>this.window.onTransition(),onPersistent:()=>this.window.onPersistent(),renderBodyContext:()=>this.renderBodyContext()}}initExpose(){const e=this.setup();return{id:e.id,open:e.open,setOpen:e.setOpen,toggle:e.toggle}}initClasses(){return{main:{...this.toClassName(this.window.classes.value)},body:this.getSubClass("body"),bodyContext:this.getSubClass("body__context"),control:this.getSubClass("control")}}initStyles(){return{...this.toClassName(this.window.styles.value)}}initRender(){const e=this.setup(),s=[];if(this.initSlot("control",s,e.slotControl),e.inDom.value){const i=[this.renderBody()];s.push(r.h(r.Teleport,{key:"teleport",disabled:e.staticMode.value,to:"body"},[r.h("div",{...this.getAttrs(),key:"main",ref:this.element,class:e.classes.value.main,style:e.styles.value,"data-window":e.id,"data-status":e.status.value,onTransitionend:e.onTransition,onAnimationend:e.onPersistent},i)]))}return s}renderBody(){const e=this.setup(),s=[this.initSlot("title"),this.renderBodyContext(),this.initSlot("footer")];return r.h("div",{key:"body",class:e.classes.value.body},s)}renderBodyContext(){const e=this.setup(),s=()=>this.initSlot("default"),i={key:"bodyContext",class:e.classes.value.bodyContext};return this.components.renderOne("scrollbar",i,s)??r.h("div",i,s)}}const B={axis:"y",indent:4,overscroll:!0},_i={open:Boolean,disabled:Boolean,preparation:Function,beforeOpening:Function,opening:Function,contextmenu:Boolean,staticMode:Boolean,axis:{type:String,default:B==null?void 0:B.axis},indent:{type:Number,default:B==null?void 0:B.indent},persistent:Boolean,overElement:[String,HTMLElement],autoClose:Boolean,flash:Boolean,inDom:Boolean,width:String,height:String,adaptive:String,overscroll:{type:Boolean,default:B==null?void 0:B.overscroll},dense:Boolean,fullscreen:Boolean,alignment:String,origin:String},O={width:["auto","max","sm","md","lg"],height:["auto","max","sm","md","lg"],adaptive:["menu","modal","modalDynamic","static","auto","staticSm","staticMd","staticLg"],alignment:["center","top","right","bottom","left"],origin:["center","top","right","bottom","left","topToBottom","rightToLeft","bottomToTop","leftToRight"]},N={...B,adaptive:"auto",overscroll:!0},Ai={..._i,width:String,height:String,adaptive:{type:String,default:N==null?void 0:N.adaptive},overscroll:{type:Boolean,default:N==null?void 0:N.overscroll},dense:Boolean,fullscreen:Boolean,alignment:String,origin:String},$i=r.defineComponent({name:"M3Window",__name:"M3Window",props:{...Ai},emits:["window"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"m3-window":!0,"m3-window--width--custom":l.isFilled(i.width)&&!l.inArray(O.width,i.width),[`m3-window--width--${i.width}`]:l.inArray(O.width,i.width),"m3-window--height--custom":l.isFilled(i.height)&&!l.inArray(O.height,i.height),[`m3-window--height--${i.height}`]:l.inArray(O.height,i.height),[`m3-window--adaptive--${i.adaptive}`]:l.inArray(O.adaptive,i.adaptive),"m3-window--overscroll":i.overscroll,"m3-window--dense":i.dense,"m3-window--fullscreen":i.fullscreen,[`m3-window--alignment--${i.alignment}`]:l.inArray(O.alignment,i.alignment),[`m3-window--origin--${i.origin}`]:l.inArray(O.origin,i.origin)}})),h=r.computed(()=>({"m3-window-sys-width":i.width??null,"m3-window-sys-height":i.height??null})),c=new Ei("m3.window",i,{emits:s,components:{scrollbar:Wt},classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),Li={...J,turn:Boolean,disabled:Boolean,hide:Boolean,adaptive:Boolean},Kt=r.defineComponent({name:"C1Image",__name:"C1Image",props:{...Li},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"c1-image":!0,"c1-image--turn":i.turn,"c1-image--disabled":i.disabled,"c1-image--hide":i.hide,"c1-image--adaptive":i.adaptive}})),h=r.computed(()=>({})),c=new X("c1.image",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),rt={animationType:["type1","type2"],rounded:["none","standard","sm","md","lg","full"],size:["xs","sm","md","lg"]},_={...F,animationType:"type1",rounded:"md",size:"xs"},Oi={...G,turn:Boolean,disabled:Boolean,hide:Boolean,animationType:{type:String,default:_==null?void 0:_.animationType},animationShow:Boolean,overlay:Boolean,dynamic:Boolean,start:Boolean,end:Boolean,high:Boolean,rounded:{type:String,default:_==null?void 0:_.rounded},size:{type:String,default:_==null?void 0:_.size}},Fi=r.defineComponent({name:"C1Icon",__name:"C1Icon",props:{...Oi},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"c1-icon":!0,"c1-icon--turn":i.turn,"c1-icon--disabled":i.disabled,"c1-icon--hide":i.hide,[`c1-icon--animationType--${i.animationType}`]:l.inArray(rt.animationType,i.animationType),"c1-icon--animationShow":i.animationShow,"c1-icon--overlay":i.overlay,"c1-icon--dynamic":i.dynamic,"c1-icon--start":i.start,"c1-icon--end":i.end,"c1-icon--high":i.high,[`c1-icon--rounded--${i.rounded}`]:l.inArray(rt.rounded,i.rounded),[`c1-icon--size--${i.size}`]:l.inArray(rt.size,i.size)}})),h=r.computed(()=>({})),c=new U("c1.icon",i,{emits:s,components:{image:Kt},classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),Ri={...J,turn:Boolean,disabled:Boolean,hide:Boolean,adaptive:Boolean},qt=r.defineComponent({name:"C2Image",__name:"C2Image",props:{...Ri},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"c2-image":!0,"c2-image--turn":i.turn,"c2-image--disabled":i.disabled,"c2-image--hide":i.hide,"c2-image--adaptive":i.adaptive}})),h=r.computed(()=>({})),c=new X("c2.image",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),z={animationType:["type1","type2"],variation:["icon","payment","avatar","country"],shape:["rect","circle","box"],size:["12","16","20","24","32"]},v={...F,animationType:"type1",variation:"icon",shape:"box",size:"24"},Ni={...G,turn:Boolean,disabled:Boolean,hide:Boolean,animationType:{type:String,default:v==null?void 0:v.animationType},animationShow:Boolean,overlay:Boolean,dynamic:Boolean,start:Boolean,end:Boolean,high:Boolean,variation:{type:String,default:v==null?void 0:v.variation},shape:{type:String,default:v==null?void 0:v.shape},size:{type:String,default:v==null?void 0:v.size}},Yt=r.defineComponent({name:"C2Icon",__name:"C2Icon",props:{...Ni},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"c2-icon":!0,"c2-icon--turn":i.turn,"c2-icon--disabled":i.disabled,"c2-icon--hide":i.hide,[`c2-icon--animationType--${i.animationType}`]:l.inArray(z.animationType,i.animationType),"c2-icon--animationShow":i.animationShow,"c2-icon--overlay":i.overlay,"c2-icon--dynamic":i.dynamic,"c2-icon--start":i.start,"c2-icon--end":i.end,"c2-icon--high":i.high,[`c2-icon--variation--${i.variation}`]:l.inArray(z.variation,i.variation),[`c2-icon--shape--${i.shape}`]:l.inArray(z.shape,i.shape),[`c2-icon--size--${i.size}`]:l.inArray(z.size,i.size)}})),h=r.computed(()=>({})),c=new U("c2.icon",i,{components:{image:qt},emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),Ct={indeterminate:["type1","type2","type3"],position:["top","bottom"]},A={...m,linear:!0,indeterminate:"type3",position:"top"},Di={...$t,linear:{type:Boolean,default:A==null?void 0:A.linear},circular:Boolean,indeterminate:{type:String,default:A==null?void 0:A.indeterminate},position:{type:String,default:A==null?void 0:A.position},dense:Boolean,inverse:Boolean},Ut=r.defineComponent({name:"C2Progress",__name:"C2Progress",props:{...Di},setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"c2-progress":!0,"c2-progress--linear":i.linear&&!i.circular,"c2-progress--circular":i.circular,[`c2-progress--indeterminate--${i.indeterminate}`]:l.inArray(Ct.indeterminate,i.indeterminate),[`c2-progress--position--${i.position}`]:l.inArray(Ct.position,i.position),"c2-progress--dense":i.dense,"c2-progress--inverse":i.inverse}})),h=r.computed(()=>({})),c=new At("c2.progress",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),W={adaptive:["icon"],size:["xl","lg","md","sm","xs","x"],intent:["positive","informative","negative","neutral","default"],palette:["carmine","iris","redfish","goldenrod","asparagus","slate","gray","alpha","pistachio","mint","jade","teal","celestial","indigo","orchid","cerise"]},$={...P,size:"md",intent:"default",primary:!0},Vi={..._t,focus:Boolean,disabled:Boolean,selected:Boolean,loading:Boolean,readonly:Boolean,adaptive:String,size:{type:String,default:$==null?void 0:$.size},outline:Boolean,link:Boolean,intent:{type:String,default:$==null?void 0:$.intent},primary:{type:Boolean,default:$==null?void 0:$.primary},secondary:Boolean,ghost:Boolean,palette:String},ji=r.defineComponent({name:"C2Button",__name:"C2Button",props:{...Vi},emits:["click"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"c2-button":!0,"c2-button--focus":i.focus,"c2-button--disabled":i.disabled,"c2-button--selected":i.selected,"c2-button--loading":i.loading,"c2-button--readonly":i.readonly,[`c2-button--adaptive--${i.adaptive}`]:l.inArray(W.adaptive,i.adaptive),[`c2-button--size--${i.size}`]:l.inArray(W.size,i.size),"c2-button--outline":i.outline,"c2-button--link":i.link,[`c2-button--intent--${i.intent}`]:l.inArray(W.intent,i.intent),"c2-button--primary":i.primary&&!i.outline&&!i.link&&!i.secondary&&!i.ghost,"c2-button--secondary":i.secondary,"c2-button--ghost":i.ghost,[`c2-palette--${i.palette}`]:l.inArray(W.palette,i.palette)}})),h=r.computed(()=>({})),c=new lt("c2.button",i,{components:{icon:Yt,progress:Ut},emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u),null,{default:r.withCtx(()=>[r.renderSlot(d.$slots,"default")]),_:3}))}}),Pi={...Pt},Gt=r.defineComponent({name:"C2MutationItem",__name:"C2MutationItem",props:{...Pi},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"c2-mutationItem":!0}})),h=r.computed(()=>({})),c=new jt("c2.mutationItem",i,{emits:s,classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),Hi={...zt},zi=r.defineComponent({name:"C2Mutation",__name:"C2Mutation",props:{...Hi},emits:["load"],setup(n,{expose:t,emit:e}){const s=e,i=n,a=r.computed(()=>({main:{"c2-mutation":!0}})),h=r.computed(()=>({})),c=new Vt("c2.mutation",i,{emits:s,components:{item:Gt},classes:a,styles:h}),u=c.render();return t(c.expose()),(d,p)=>(r.openBlock(),r.createBlock(r.unref(u)))}}),Xt={M2Icon:Be,M2Image:wt,M2Ripple:Me,M3Button:De,M3Checkbox:cs,M3Chip:gs,M3FieldMessage:Lt,M3Icon:dt,M3Image:ut,M3Input:fs,M3Mask:Us,M3Mutation:ri,M3MutationItem:Ht,M3Progress:gt,M3Ripple:Ot,M3Scrollbar:Wt,M3Window:$i,C1Icon:Fi,C1Image:Kt,C2Button:ji,C2Icon:Yt,C2Image:qt,C2Mutation:zi,C2MutationItem:Gt,C2Progress:Ut};async function Jt(n){await(await Promise.resolve().then(()=>require("./media.umd.cjs"))).makeMediaGlobal(),l.forEach(Xt,(t,e)=>{n.component(e,t)})}async function Wi(n){const t=r.createApp(n);return await Jt(t),t}exports.KEY_GLOBAL_PROJECT=V;exports.MutationGlobal=I;exports.components=Xt;exports.createUiComponents=Wi;exports.registrationUiComponents=Jt;
