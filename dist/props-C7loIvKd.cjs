"use strict";var v=Object.defineProperty;var p=(r,s,e)=>s in r?v(r,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[s]=e;var n=(r,s,e)=>(p(r,typeof s!="symbol"?s+"":s,e),e);const a=require("vue"),b=require("./DesignConstructorAbstract-CFxqa-MO.cjs"),u=require("./number-DjaOC1Mo.cjs"),g=require("./DesignAsyncAbstract-TK_m2t1N.cjs");class d extends g.DesignAsyncAbstract{constructor(e,t){super(e,t,["value","visible"]);n(this,"timeout");n(this,"timeoutReject")}isValue(){return this.getValue()>0}getTag(){var e;return(e=this.props)!=null&&e.circular?"svg":"div"}getValue(){var e;return u.toNumber(((e=this.props)==null?void 0:e.value)??0)}getValueInPercent(){var e;if(this.isValue()){const t=this.getValue(),l=100/this.getMax()*t;return(e=this.props)!=null&&e.circular?l.toString():`${100-l}%`}return null}getMax(){var e;return u.toNumber(((e=this.props)==null?void 0:e.max)??100)}getStyles(){return{"--??-sys-value":this.getValueInPercent()}}onAnimation({animationName:e}){e.match("-hidden")&&(this.event.hide=!1,this.event.classes=this.initClasses(),this.makeCallbackItem())}async initEvent(){this.isChanged("visible")&&([this.event.hide,this.event.visible]=await this.makeVisible()),this.isChanged("classes",["value","visible"])&&(this.event.classes=this.initClasses())}makeVisible(){return new Promise((e,t)=>{var o,h,m;const l=(o=this.props)==null?void 0:o.visible,c=u.toNumber(((h=this.props)==null?void 0:h.delay)??0);clearTimeout(this.timeout),this.isValue()?e([!1,!1]):!!((m=this.event)!=null&&m.visible)!==l&&(l&&c?(this.timeout=setTimeout(()=>{clearTimeout(this.timeoutReject),e(this.initVisible())},c),this.timeoutReject=setTimeout(t,c+1e3)):e(this.initVisible()))})}initVisible(){var t;const e=(t=this.props)==null?void 0:t.visible;return[!e,!!e]}initClasses(){return{"??--hide":this.event.hide,"??--visible":this.event.visible,"??--value":this.isValue()}}}class y{constructor(s){n(this,"item");n(this,"tag",a.computed(()=>this.item.getTag()));n(this,"valueInPercent",a.computed(()=>this.item.getValueInPercent()));n(this,"hide",a.shallowRef(!1));n(this,"visible",a.shallowRef(!1));n(this,"classes",a.shallowRef({}));n(this,"styles",a.computed(()=>this.item.getStyles()));this.props=s,this.item=new d(s,e=>{this.hide.value=e.hide,this.visible.value=e.visible,this.classes.value=e.classes}),a.watchEffect(()=>this.item.make())}onAnimation(s){this.item.onAnimation(s)}}class f extends b.DesignConstructorAbstract{constructor(e,t,l){super(e,t,l);n(this,"item");this.item=new y(t),this.init()}makeOptions(){return this}initSetup(){return{tag:this.item.tag,valueInPercent:this.item.valueInPercent,hide:this.item.hide,visible:this.item.visible,onAnimation:e=>this.item.onAnimation(e)}}initExpose(){return{}}initClasses(){return{main:{...this.toClassName(this.item.classes.value)},circle:this.getSubClass("circle"),circleSub:this.getSubClass("circleSub")}}initStyles(){return{...this.toClassName(this.item.styles.value)}}initRender(){var l,c;const e=this.setup(),t=[];return(l=this.props)!=null&&l.circular&&(((c=this.props)==null?void 0:c.indeterminate)==="type3"&&t.push(a.h("circle",{class:e.classes.value.circleSub,cx:"24",cy:"24",r:"20"})),t.push(a.h("circle",{class:e.classes.value.circle,cx:"24",cy:"24",r:"20"}))),a.h(e.tag.value,{ref:this.element,class:e.classes.value.main,style:e.styles.value,viewBox:"0 0 48 48",onAnimationend:e.onAnimation},t)}}const i={max:100,delay:360,linear:!0,indeterminate:"type1",position:"top"},S={value:[Number,String],max:{type:[Number,String],default:i==null?void 0:i.max},visible:Boolean,delay:{type:[Number,String],default:i==null?void 0:i.delay},linear:{type:Boolean,default:i==null?void 0:i.linear},circular:Boolean,indeterminate:{type:String,default:i==null?void 0:i.indeterminate},position:{type:String,default:i==null?void 0:i.position},dense:Boolean,inverse:Boolean};exports.ProgressDesign=f;exports.defaultsProgress=i;exports.propsProgress=S;
