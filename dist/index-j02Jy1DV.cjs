"use strict";var Q=Object.defineProperty;var V=(r,t,e)=>t in r?Q(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var n=(r,t,e)=>(V(r,typeof t!="symbol"?t+"":t,e),e);const c=require("./object-D6teWcGS.cjs"),h=require("./GeoIntl-C6R6LJ7C.cjs"),g=require("./element-B5HRaKMF.cjs"),R=require("./event-DT6CybI_.cjs"),_=require("./frame-DXVFJIF1.cjs"),b=require("./number-DjaOC1Mo.cjs"),o=require("./string-C-Ov7RqZ.cjs"),v=require("./Icons-DkmKgU9_.cjs"),T=require("./CacheItem-CMrGJ4bG.cjs"),B=require("./useEnv-D4nMsB2C.cjs"),L=require("./DataStorage-ZiGWmdAg.cjs"),W=require("./Datetime-CiMhUcvQ.cjs"),s=require("vue"),G=require("./EventItem-BpiP8Lxv.cjs");class O{constructor(){n(this,"cache",{})}get(t,e,i){return this.getCacheItem(t,e).getCache(i??[])}async getAsync(t,e,i){return await this.getCacheItem(t,e).getCacheAsync(i??[])}getCacheItem(t,e){return t in this.cache||(this.cache[t]=new T.CacheItem(e)),this.cache[t]}}const k=class k{static get(t,e,i){return this.cache.get(t,e,i)}};n(k,"cache"),k.cache=new O;let E=k;const tt="cookie-block";class S{static get(){return this.storage.get()??!1}static set(t){this.storage.set(t)}}n(S,"storage",new L.DataStorage(tt));const I={};class ${constructor(t){n(this,"value");n(this,"options",{});if(this.name=t,t in N)return N[t];this.value=I==null?void 0:I[t],N[t]=this}get(t,e){return this.value===void 0&&t&&this.set(t,e),this.value}set(t,e){this.value=c.executeFunction(t),Object.assign(this.options,e),this.update()}remove(){this.set("")}getAge(){var t;return((t=this.options)==null?void 0:t.age)??B.useEnv("cache")??7*24*60*60}update(){var t,e;if(!S.get()){const i=String(this.value??"");document.cookie=[`${encodeURIComponent(this.name)}=${encodeURIComponent(i)}`,`max-age=${i===""?"-1":this.getAge()}`,`SameSite=${((t=this.options)==null?void 0:t.sameSite)??"strict"}`,...((e=this.options)==null?void 0:e.arguments)??[]].join("; ")}}}(()=>{for(const t of document.cookie.split(";")){const[e,i]=t.trim().split("=");e&&c.isFilled(i)&&(I[e]=c.transformation(i))}})();const N={};class K{constructor(t,e="date",i=h.Geo.getLocation()){n(this,"item");n(this,"type");n(this,"code");n(this,"date");n(this,"datetime");n(this,"year",s.computed(()=>this.date.value&&this.datetime.getYear()));n(this,"month",s.computed(()=>this.date.value&&this.datetime.getMonth()));n(this,"day",s.computed(()=>this.date.value&&this.datetime.getDay()));n(this,"hour",s.computed(()=>this.date.value&&this.datetime.getHour()));n(this,"minute",s.computed(()=>this.date.value&&this.datetime.getMinute()));n(this,"second",s.computed(()=>this.date.value&&this.datetime.getSecond()));this.item=o.toRefItem(t),this.type=o.toRefItem(e),this.code=o.toRefItem(i),this.date=s.ref(h.toDate(this.item.value)),this.datetime=new W.Datetime(this.date.value,this.type.value,this.code.value),s.watch(this.item,a=>{this.date.value=h.toDate(a)}),s.watch(this.type,a=>this.datetime.setType(a)),s.watch(this.code,a=>this.datetime.setCode(a)),s.watch(this.date,a=>this.datetime.setDate(a)),this.datetime.setWatch(()=>s.triggerRef(this.date))}getItem(){return this.item}getDate(){return this.date}getDatetime(){return this.datetime}getHoursType(){return s.computed(()=>this.date.value&&this.datetime.getHoursType())}getFirstDayCode(){return s.computed(()=>this.date.value&&this.datetime.getFirstDayCode())}getYear(){return this.year}getMonth(){return this.month}getDay(){return this.day}getHour(){return this.hour}getMinute(){return this.minute}getSecond(){return this.second}getMaxDay(){return s.computed(()=>this.date.value&&this.datetime.getMaxDay())}locale(t=this.type.value,e){return s.computed(()=>this.date.value&&this.datetime.locale(t,e))}standard(t=!0){return s.computed(()=>this.date.value&&this.datetime.standard(t))}}class U extends G.EventItem{constructor(t,e,i=["click"],a,u,C){const w=o.toRefItem(t),F=o.toRefItem(e);super(w.value,i,a,u,C),F.value&&this.setElementControl(F.value),s.watch(w,A=>this.setElement(A)),s.watch(F,A=>this.setElementControl(A))}}const l=class l{static get(){return this.item}static getCountry(){return this.country}static getLanguage(){return this.language}static getStandard(){return this.standard}static getFirstDay(){return this.firstDay}static set(t){h.Geo.set(t,!0),this.item.value=h.Geo.getItem()}};n(l,"item",s.shallowRef(h.Geo.get())),n(l,"country",s.computed(()=>l.item.value.country)),n(l,"language",s.computed(()=>l.item.value.language)),n(l,"standard",s.computed(()=>l.item.value.standard)),n(l,"firstDay",s.computed(()=>l.item.value.firstDay));let y=l;class Y{constructor(t=h.Geo.getLocation()){n(this,"code");n(this,"flag");this.code=o.toRefItem(t),this.flag=new v.GeoFlag(this.code.value),s.watch(this.code,e=>this.flag.setCode(e))}getCode(){return this.code}get(t=this.code.value){return s.computed(()=>this.flag.get(t))}getFlag(t=this.code.value){return s.computed(()=>{var e;return(e=this.flag.get(t))==null?void 0:e.icon})}getList(t){return s.computed(()=>this.flag.getList(t))}getNational(t){return s.computed(()=>this.flag.getNational(t))}}class P{constructor(t){n(this,"location");n(this,"intl");this.location=o.toRefItem(t),this.intl=s.computed(()=>new h.GeoIntl(this.location.value??y.getLanguage().value))}display(t,e){return s.computed(()=>this.intl.value.display(o.getRef(t),e))}languageName(t,e){return s.computed(()=>this.intl.value.languageName(o.getRef(t),e))}countryName(t,e){return s.computed(()=>this.intl.value.countryName(o.getRef(t),e))}number(t,e){return s.computed(()=>this.intl.value.number(o.getRef(t),e))}decimal(){return s.computed(()=>this.intl.value.decimal())}currency(t,e,i=!1){return s.computed(()=>this.intl.value.currency(o.getRef(t),e,i))}unit(t,e){return s.computed(()=>this.intl.value.unit(o.getRef(t),e))}percent(t,e){return s.computed(()=>this.intl.value.percent(o.getRef(t),e))}percentBy100(t,e){return s.computed(()=>this.intl.value.percentBy100(o.getRef(t),e))}date(t,e,i,a){return s.computed(()=>this.intl.value.date(o.getRef(t),e,i,a))}relative(t,e,i){return s.computed(()=>this.intl.value.relative(o.getRef(t),e,i))}relativeLimit(t,e,i,a,u,C,w){return s.computed(()=>this.intl.value.relativeLimit(o.getRef(t),e,i,a,u,C,w))}month(t,e){return s.computed(()=>this.intl.value.month(o.getRef(t),e))}months(t){return s.computed(()=>this.intl.value.months(t))}weekday(t,e){return s.computed(()=>this.intl.value.weekday(o.getRef(t),e))}weekdays(t){return s.computed(()=>this.intl.value.weekdays(t))}time(t){return s.computed(()=>this.intl.value.time(o.getRef(t)))}}const p=class p{static get(t){return this.list.find(e=>t===e.value)}static getByPhone(t){let e=this.map,i,a="";return this.toNumber(t).forEach(u=>{a===""&&u in e?(i=e[u],e=e[u].next):a+=u}),{item:i,phone:a}}static getList(){return this.list}static getMap(){return this.map}static toMask(t,e){if(c.isFilled(t)&&Array.isArray(e)&&e.length>0){const i=this.removeZero(t),a=i.length;for(const u of e)if(this.getUnnecessaryLength(u)===a)return this.toStandard(i,u)}}static removeZero(t){return t.match(/^0/)?t.replace(/^0/,""):t.match(/^89/)?t.replace(/^8/,""):t}static getUnnecessaryLength(t){return t.replace(/[^*]+/ig,"").length}static makeList(){const t=c.forEach(h.Geo.getList(),e=>{if(e!=null&&e.phoneMask)return{phone:(e==null?void 0:e.phoneCode)&&parseInt(e.phoneCode)||void 0,mask:c.toArray(e.phoneMask),value:e.country}});this.list=t.sort((e,i)=>e.phone-i.phone)}static makeMap(){this.list.forEach(t=>{t.mask.forEach(e=>{let i=this.map,a;this.toNumber(e).forEach(u=>{u in i||(i[u]={items:[],info:void 0,value:void 0,mask:[],maskFull:[],next:{}}),a=i[u],i=i[u].next}),a&&(a.value===void 0&&(a.info=t,a.value=t.value),a.mask.push(e),a.maskFull.push(e.replace(/\d/ig,"*")),a.items.push(t))})})}static toNumber(t){return t.replace(/\D+/ig,"").split("")}static toStandard(t,e){let i=0;return e.replace(/\*/ig,()=>t[i++])}};n(p,"list",[]),n(p,"map",{}),p.makeList(),p.makeMap();let D=p;const m=class m{static get(t,e){return!(t in this.hash)&&e&&this.set(t,e),this.hash[t]}static set(t,e){var a;const i=c.executeFunction(e);i!==((a=this.hash)==null?void 0:a[t])&&(this.hash[t]=i,this.update())}static addWatch(t,e){t in this.watch?this.watch[t].push(e):this.watch={[t]:[e]}}static getLocation(){const t={};return location.hash.replace(/([\w-]+)[:=]([^;]+)/ig,(...e)=>(t[e[1]]=c.transformation(e[2]),"")),t}static update(){this.block=!0;const t=c.forEach(this.hash,(e,i)=>`${i}=${encodeURIComponent(String(e))}`);t.sort(),history.replaceState(null,"",`#${t.join(";")}`),requestAnimationFrame(()=>{this.block=!1})}static reload(){if(!this.block){const t=this.getLocation();this.makeWatch(t),this.hash=t}}static makeWatch(t){c.forEach(this.watch,(e,i)=>{var a;((a=this.hash)==null?void 0:a[i])!==(t==null?void 0:t[i])&&e.forEach(u=>u(t[i]))})}};n(m,"hash",{}),n(m,"watch",{}),n(m,"block",!1),m.reload(),addEventListener("hashchange",()=>m.reload());let f=m;class d{static async get(t){var i;const e=this.getName(t);return e in this.data?this.data[e]:(await this.add(t),((i=this.data)==null?void 0:i[e])??t)}static getSync(t){const e=this.getName(t);return e in this.data?this.data[e]:t}static async getList(t){return new Promise(e=>{const i={};let a=0;for(const u of t)this.get(u).then(C=>{i[u]=C,++a>=t.length&&e(i)})})}static add(t){return new Promise(e=>{this.cache.push(...c.toArray(t)),this.resolveList.push(e),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.timeout=void 0,this.make().then(()=>{this.resolveList.forEach(i=>i()),this.resolveList=[]})},160)})}static getName(t){return`${h.Geo.getLocation()}-${t}`}static async getResponse(){const t=v.Api.isLocalhost()?this.urlLocalhost:this.url,e=await v.Api.response({path:t,request:{list:this.cache}});return(e==null?void 0:e.data)??{}}static async make(){const t=await this.getResponse();this.cache.forEach(e=>{this.data[this.getName(e)]=(t==null?void 0:t[e])??""}),this.cache=[]}}n(d,"url",B.useEnv("apiTranslate")),n(d,"urlLocalhost","translate.json"),n(d,"data",{}),n(d,"cache",[]),n(d,"resolveList",[]),n(d,"timeout");function X(r,t,e){if(r in q)return q[r];const i=new $(r),a=s.ref(i.get(t,e));return s.watch(a,u=>{i.set(u,e)}),q[r]=a,a}const q={};function Z(r,t){if(r in M)return M[r];const e=s.shallowRef(f.get(r,t));return s.watch(e,i=>f.set(r,i)),f.addWatch(r,i=>{e.value=i}),M[r]=e,e}const M={};function z(r,t){if(r in x)return x[r];const e=new L.DataStorage(r,!0),i=s.shallowRef(e.get(t));return s.watch(i,a=>e.set(a)),x[r]=i,i}const x={};function H(r,t,e){if(r in j)return j[r];const i=new L.DataStorage(r),a=s.shallowRef(i.get(t,e));return s.watch(a,u=>i.set(u)),j[r]=a,a}const j={};function J(r){const t=s.shallowRef({});return s.watchEffect(async()=>{y.getLanguage()&&(t.value=await d.getList(r))}),t}const et=Object.freeze(Object.defineProperty({__proto__:null,Api:v.Api,Cache:O,CacheItem:T.CacheItem,CacheStatic:E,Cookie:$,CookieBlock:S,DataStorage:L.DataStorage,Datetime:W.Datetime,DatetimeRef:K,EventItem:G.EventItem,EventRef:U,Geo:h.Geo,GeoFlag:v.GeoFlag,GeoFlagRef:Y,GeoIntl:h.GeoIntl,GeoIntlRef:P,GeoPhone:D,GeoRef:y,Hash:f,Icons:v.Icons,Translate:d,anyToString:o.anyToString,arrFill:c.arrFill,copyObject:c.copyObject,createElement:g.createElement,executeFunction:c.executeFunction,forEach:c.forEach,frame:_.frame,getAttributes:g.getAttributes,getBind:o.getBind,getBindRef:o.getBindRef,getClassName:o.getClassName,getClient:R.getClient,getClientX:R.getClientX,getClientY:R.getClientY,getClipboardData:o.getClipboardData,getColumn:c.getColumn,getElement:g.getElement,getElementId:g.getElementId,getElementItem:g.getElementItem,getElementOrWindow:g.getElementOrWindow,getExp:o.getExp,getIndex:o.getIndex,getKey:R.getKey,getMaxLength:c.getMaxLength,getMinLength:c.getMinLength,getRef:o.getRef,inArray:c.inArray,intersectKey:c.intersectKey,isArray:c.isArray,isDifferent:c.isDifferent,isFilled:c.isFilled,isFunction:c.isFunction,isInDom:g.isInDom,isIntegerBetween:b.isIntegerBetween,isNull:c.isNull,isObject:c.isObject,isObjectNotArray:c.isObjectNotArray,isSelected:c.isSelected,isSelectedByList:c.isSelectedByList,isString:c.isString,isWindow:g.isWindow,makeStopPropagation:R.makeStopPropagation,random:b.random,render:o.render,replaceRecursive:c.replaceRecursive,replaceTemplate:o.replaceTemplate,setElementItem:g.setElementItem,splice:c.splice,strFill:o.strFill,toArray:c.toArray,toCamelCase:o.toCamelCase,toCamelCaseFirst:o.toCamelCaseFirst,toDate:h.toDate,toKebabCase:o.toKebabCase,toNumber:b.toNumber,toRefItem:o.toRefItem,transformation:c.transformation,uniqueArray:c.uniqueArray,useCookieRef:X,useEnv:B.useEnv,useHashRef:Z,useSessionRef:z,useStorageRef:H,useTranslateRef:J},Symbol.toStringTag,{value:"Module"}));exports.Cache=O;exports.CacheStatic=E;exports.Cookie=$;exports.CookieBlock=S;exports.DatetimeRef=K;exports.EventRef=U;exports.GeoFlagRef=Y;exports.GeoIntlRef=P;exports.GeoPhone=D;exports.GeoRef=y;exports.Hash=f;exports.Translate=d;exports.ui=et;exports.useCookieRef=X;exports.useHashRef=Z;exports.useSessionRef=z;exports.useStorageRef=H;exports.useTranslateRef=J;
