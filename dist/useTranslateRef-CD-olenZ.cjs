"use strict";var P=Object.defineProperty;var O=(g,t,e)=>t in g?P(g,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):g[t]=e;var l=(g,t,e)=>(O(g,typeof t!="symbol"?t+"":t,e),e);const n=require("./CacheItem-C85ixkdu.cjs"),s=require("vue"),v=require("./Datetime-B7stvKaH.cjs"),r=require("./string-BsLl7qfq.cjs"),W=require("./EventItem-_8Xb13_b.cjs"),F=require("./useEnv-BT5bxpHr.cjs"),T=require("./DataStorage-J24mlQWB.cjs"),B=require("./Icons-D1WGS8oY.cjs");class K{constructor(){l(this,"cache",{})}get(t,e,a){return this.getCacheItem(t,e).getCache(a??[])}async getAsync(t,e,a){return await this.getCacheItem(t,e).getCacheAsync(a??[])}getCacheItem(t,e){return t in this.cache||(this.cache[t]=new n.CacheItem(e)),this.cache[t]}}const w=class w{static get(t,e,a){return this.cache.get(t,e,a)}};l(w,"cache"),w.cache=new K;let D=w;const q="cookie-block";class b{static get(){return this.storage.get()??!1}static set(t){this.storage.set(t)}}l(b,"storage",new T.DataStorage(q));const C={};class U{constructor(t){l(this,"value");l(this,"options",{});if(this.name=t,t in S)return S[t];this.value=C==null?void 0:C[t],S[t]=this}get(t,e){return this.value===void 0&&t&&this.set(t,e),this.value}set(t,e){this.value=r.executeFunction(t),Object.assign(this.options,e),this.update()}remove(){this.set("")}getAge(){var t;return((t=this.options)==null?void 0:t.age)??F.useEnv("cache")??7*24*60*60}update(){var t,e;if(!b.get()){const a=String(this.value??"");document.cookie=[`${encodeURIComponent(this.name)}=${encodeURIComponent(a)}`,`max-age=${a===""?"-1":this.getAge()}`,`SameSite=${((t=this.options)==null?void 0:t.sameSite)??"strict"}`,...((e=this.options)==null?void 0:e.arguments)??[]].join("; ")}}}(()=>{for(const t of document.cookie.split(";")){const[e,a]=t.trim().split("=");e&&r.isFilled(a)&&(C[e]=r.transformation(a))}})();const S={};class H{constructor(t,e="date",a=n.Geo.getLocation()){l(this,"item");l(this,"type");l(this,"code");l(this,"date");l(this,"datetime");l(this,"year",s.computed(()=>this.date.value&&this.datetime.getYear()));l(this,"month",s.computed(()=>this.date.value&&this.datetime.getMonth()));l(this,"day",s.computed(()=>this.date.value&&this.datetime.getDay()));l(this,"hour",s.computed(()=>this.date.value&&this.datetime.getHour()));l(this,"minute",s.computed(()=>this.date.value&&this.datetime.getMinute()));l(this,"second",s.computed(()=>this.date.value&&this.datetime.getSecond()));this.item=r.toRefItem(t),this.type=r.toRefItem(e),this.code=r.toRefItem(a),this.date=s.ref(v.toDate(this.item.value)),this.datetime=new v.Datetime(this.date.value,this.type.value,this.code.value),s.watch(this.item,i=>{this.date.value=v.toDate(i)}),s.watch(this.type,i=>this.datetime.setType(i)),s.watch(this.code,i=>this.datetime.setCode(i)),s.watch(this.date,i=>this.datetime.setDate(i)),this.datetime.setWatch(()=>s.triggerRef(this.date))}getItem(){return this.item}getDate(){return this.date}getDatetime(){return this.datetime}getHoursType(){return s.computed(()=>this.date.value&&this.datetime.getHoursType())}getFirstDayCode(){return s.computed(()=>this.date.value&&this.datetime.getFirstDayCode())}getYear(){return this.year}getMonth(){return this.month}getDay(){return this.day}getHour(){return this.hour}getMinute(){return this.minute}getSecond(){return this.second}getMaxDay(){return s.computed(()=>this.date.value&&this.datetime.getMaxDay())}locale(t=this.type.value,e){return s.computed(()=>this.date.value&&this.datetime.locale(t,e))}standard(t=!0){return s.computed(()=>this.date.value&&this.datetime.standard(t))}}class Z extends W.EventItem{constructor(t,e,a=["click"],i,f,p){const R=r.toRefItem(t),k=r.toRefItem(e);super(R.value,a,i,f,p),k.value&&this.setElementControl(k.value),s.watch(R,M=>this.setElement(M)),s.watch(k,M=>this.setElementControl(M))}}const c=class c{static get(){return this.item}static getCountry(){return this.country}static getLanguage(){return this.language}static getStandard(){return this.standard}static getFirstDay(){return this.firstDay}static set(t){n.Geo.set(t,!0),this.item.value=n.Geo.getItem()}};l(c,"item",s.shallowRef(n.Geo.get())),l(c,"country",s.computed(()=>c.item.value.country)),l(c,"language",s.computed(()=>c.item.value.language)),l(c,"standard",s.computed(()=>c.item.value.standard)),l(c,"firstDay",s.computed(()=>c.item.value.firstDay));let y=c;const h=class h{constructor(t=n.Geo.getLocation()){this.code=t}get(t=this.code){var a;const e=n.Geo.find(t);if(e){const i=this.getCountry(e);return{language:this.getLanguage(e),country:i,standard:e.standard,icon:(a=h.flags)==null?void 0:a[e.country],label:i,value:e.country}}}getFlag(t=this.code){var e;return(e=this.get(t))==null?void 0:e.icon}getList(t){return r.forEach(this.getCodes(t),e=>this.get(e))}getNational(t){return r.forEach(this.getList(t),e=>{const a=new h(e.language).get(e.standard);return{...e,nationalLanguage:a==null?void 0:a.language,nationalCountry:a==null?void 0:a.country}})}setCode(t){return this.code=t,this}getLocation(){return new v.GeoIntl(this.code)}getCodes(t){return t??Object.keys(h.flags)}getLanguage(t){return this.getLocation().languageName(t.language)}getCountry(t){return this.getLocation().countryName(t.country)}};l(h,"flags",{AD:"@flag-ad",AE:"@flag-ae",AF:"@flag-af",AG:"@flag-ag",AI:"@flag-ai",AL:"@flag-al",AM:"@flag-am",AN:"@flag-an",AO:"@flag-ao",AQ:"@flag-aq",AR:"@flag-ar",AS:"@flag-as",AT:"@flag-at",AU:"@flag-au",AW:"@flag-aw",AX:"@flag-ax",AZ:"@flag-az",BA:"@flag-ba",BB:"@flag-bb",BD:"@flag-bd",BE:"@flag-be",BF:"@flag-bf",BG:"@flag-bg",BH:"@flag-bh",BI:"@flag-bi",BJ:"@flag-bj",BL:"@flag-bl",BM:"@flag-bm",BN:"@flag-bn",BO:"@flag-bo",BQ:"@flag-bq",BR:"@flag-br",BS:"@flag-bs",BT:"@flag-bt",BV:"@flag-bv",BW:"@flag-bw",BY:"@flag-by",BZ:"@flag-bz",CA:"@flag-ca",CC:"@flag-cc",CD:"@flag-cd",CF:"@flag-cf",CG:"@flag-cg",CH:"@flag-ch",CI:"@flag-ci",CK:"@flag-ck",CL:"@flag-cl",CM:"@flag-cm",CN:"@flag-cn",CO:"@flag-co",CR:"@flag-cr",CU:"@flag-cu",CV:"@flag-cv",CW:"@flag-cw",CX:"@flag-cx",CY:"@flag-cy",CZ:"@flag-cz",DE:"@flag-de",DJ:"@flag-dj",DK:"@flag-dk",DM:"@flag-dm",DO:"@flag-do",DZ:"@flag-dz",EC:"@flag-ec",EE:"@flag-ee",EG:"@flag-eg",EH:"@flag-eh",ER:"@flag-er",ES:"@flag-es",ET:"@flag-et",FI:"@flag-fi",FJ:"@flag-fj",FK:"@flag-fk",FM:"@flag-fm",FO:"@flag-fo",FR:"@flag-fr",GA:"@flag-ga",GB:"@flag-gb",GD:"@flag-gd",GE:"@flag-ge",GF:"@flag-gf",GG:"@flag-gg",GH:"@flag-gh",GI:"@flag-gi",GL:"@flag-gl",GM:"@flag-gm",GN:"@flag-gn",GP:"@flag-gp",GQ:"@flag-gq",GR:"@flag-gr",GT:"@flag-gt",GU:"@flag-gu",GW:"@flag-gw",GY:"@flag-gy",HK:"@flag-hk",HM:"@flag-hm",HN:"@flag-hn",HR:"@flag-hr",HT:"@flag-ht",HU:"@flag-hu",ID:"@flag-id",IE:"@flag-ie",IL:"@flag-il",IM:"@flag-im",IN:"@flag-in",IO:"@flag-io",IQ:"@flag-iq",IR:"@flag-ir",IS:"@flag-is",IT:"@flag-it",JE:"@flag-je",JM:"@flag-jm",JO:"@flag-jo",JP:"@flag-jp",KE:"@flag-ke",KG:"@flag-kg",KH:"@flag-kh",KI:"@flag-ki",KM:"@flag-km",KN:"@flag-kn",KP:"@flag-kp",KR:"@flag-kr",KW:"@flag-kw",KY:"@flag-ky",KZ:"@flag-kz",LA:"@flag-la",LB:"@flag-lb",LC:"@flag-lc",LI:"@flag-li",LK:"@flag-lk",LR:"@flag-lr",LS:"@flag-ls",LT:"@flag-lt",LU:"@flag-lu",LV:"@flag-lv",LY:"@flag-ly",MA:"@flag-ma",MC:"@flag-mc",MD:"@flag-md",ME:"@flag-me",MF:"@flag-mf",MG:"@flag-mg",MH:"@flag-mh",MK:"@flag-mk",ML:"@flag-ml",MM:"@flag-mm",MN:"@flag-mn",MO:"@flag-mo",MP:"@flag-mp",MQ:"@flag-mq",MR:"@flag-mr",MS:"@flag-ms",MT:"@flag-mt",MU:"@flag-mu",MV:"@flag-mv",MW:"@flag-mw",MX:"@flag-mx",MY:"@flag-my",MZ:"@flag-mz",NA:"@flag-na",NC:"@flag-nc",NE:"@flag-ne",NF:"@flag-nf",NG:"@flag-ng",NI:"@flag-ni",NL:"@flag-nl",NO:"@flag-no",NP:"@flag-np",NR:"@flag-nr",NU:"@flag-nu",NZ:"@flag-nz",OM:"@flag-om",PA:"@flag-pa",PE:"@flag-pe",PF:"@flag-pf",PG:"@flag-pg",PH:"@flag-ph",PK:"@flag-pk",PL:"@flag-pl",PM:"@flag-pm",PN:"@flag-pn",PR:"@flag-pr",PS:"@flag-ps",PT:"@flag-pt",PW:"@flag-pw",PY:"@flag-py",QA:"@flag-qa",RE:"@flag-re",RO:"@flag-ro",RS:"@flag-rs",RU:"@flag-ru",RW:"@flag-rw",SA:"@flag-sa",SB:"@flag-sb",SC:"@flag-sc",SD:"@flag-sd",SE:"@flag-se",SG:"@flag-sg",SH:"@flag-sh",SI:"@flag-si",SJ:"@flag-sj",SK:"@flag-sk",SL:"@flag-sl",SM:"@flag-sm",SN:"@flag-sn",SO:"@flag-so",SR:"@flag-sr",SS:"@flag-ss",ST:"@flag-st",SV:"@flag-sv",SX:"@flag-sx",SY:"@flag-sy",SZ:"@flag-sz",TC:"@flag-tc",TD:"@flag-td",TG:"@flag-tg",TH:"@flag-th",TJ:"@flag-tj",TK:"@flag-tk",TL:"@flag-tl",TM:"@flag-tm",TN:"@flag-tn",TO:"@flag-to",TR:"@flag-tr",TT:"@flag-tt",TV:"@flag-tv",TW:"@flag-tw",TZ:"@flag-tz",UA:"@flag-ua",UG:"@flag-ug",US:"@flag-us",UY:"@flag-uy",UZ:"@flag-uz",VA:"@flag-va",VC:"@flag-vc",VE:"@flag-ve",VG:"@flag-vg",VI:"@flag-vi",VN:"@flag-vn",VU:"@flag-vu",WF:"@flag-wf",WS:"@flag-ws",YE:"@flag-ye",YT:"@flag-yt",ZA:"@flag-za",ZM:"@flag-zm",ZW:"@flag-zw"});let L=h;class j{constructor(t=n.Geo.getLocation()){l(this,"code");l(this,"flag");this.code=r.toRefItem(t),this.flag=new L(this.code.value),s.watch(this.code,e=>this.flag.setCode(e))}getCode(){return this.code}get(t=this.code.value){return s.computed(()=>this.flag.get(t))}getFlag(t=this.code.value){return s.computed(()=>{var e;return(e=this.flag.get(t))==null?void 0:e.icon})}getList(t){return s.computed(()=>this.flag.getList(t))}getNational(t){return s.computed(()=>this.flag.getNational(t))}}class x{constructor(t){l(this,"location");l(this,"intl");this.location=r.toRefItem(t),this.intl=s.computed(()=>new v.GeoIntl(this.location.value??y.getLanguage().value))}display(t,e){return s.computed(()=>this.intl.value.display(r.getRef(t),e))}languageName(t,e){return s.computed(()=>this.intl.value.languageName(r.getRef(t),e))}countryName(t,e){return s.computed(()=>this.intl.value.countryName(r.getRef(t),e))}number(t,e){return s.computed(()=>this.intl.value.number(r.getRef(t),e))}decimal(){return s.computed(()=>this.intl.value.decimal())}currency(t,e,a=!1){return s.computed(()=>this.intl.value.currency(r.getRef(t),e,a))}unit(t,e){return s.computed(()=>this.intl.value.unit(r.getRef(t),e))}percent(t,e){return s.computed(()=>this.intl.value.percent(r.getRef(t),e))}percentBy100(t,e){return s.computed(()=>this.intl.value.percentBy100(r.getRef(t),e))}date(t,e,a,i){return s.computed(()=>this.intl.value.date(r.getRef(t),e,a,i))}relative(t,e,a){return s.computed(()=>this.intl.value.relative(r.getRef(t),e,a))}relativeLimit(t,e,a,i,f,p,R){return s.computed(()=>this.intl.value.relativeLimit(r.getRef(t),e,a,i,f,p,R))}month(t,e){return s.computed(()=>this.intl.value.month(r.getRef(t),e))}months(t){return s.computed(()=>this.intl.value.months(t))}weekday(t,e){return s.computed(()=>this.intl.value.weekday(r.getRef(t),e))}weekdays(t){return s.computed(()=>this.intl.value.weekdays(t))}time(t){return s.computed(()=>this.intl.value.time(r.getRef(t)))}}const d=class d{static get(t){return this.list.find(e=>t===e.value)}static getByPhone(t){let e=this.map,a,i="";return this.toNumber(t).forEach(f=>{i===""&&f in e?(a=e[f],e=e[f].next):i+=f}),{item:a,phone:i}}static getList(){return this.list}static getMap(){return this.map}static toMask(t,e){if(r.isFilled(t)&&Array.isArray(e)&&e.length>0){const a=this.removeZero(t),i=a.length;for(const f of e)if(this.getUnnecessaryLength(f)===i)return this.toStandard(a,f)}}static removeZero(t){return t.match(/^0/)?t.replace(/^0/,""):t.match(/^89/)?t.replace(/^8/,""):t}static getUnnecessaryLength(t){return t.replace(/[^*]+/ig,"").length}static makeList(){const t=r.forEach(n.Geo.getList(),e=>{if(e!=null&&e.phoneMask)return{phone:(e==null?void 0:e.phoneCode)&&parseInt(e.phoneCode)||void 0,mask:r.toArray(e.phoneMask),value:e.country}});this.list=t.sort((e,a)=>e.phone-a.phone)}static makeMap(){this.list.forEach(t=>{t.mask.forEach(e=>{let a=this.map,i;this.toNumber(e).forEach(f=>{f in a||(a[f]={items:[],info:void 0,value:void 0,mask:[],maskFull:[],next:{}}),i=a[f],a=a[f].next}),i&&(i.value===void 0&&(i.info=t,i.value=t.value),i.mask.push(e),i.maskFull.push(e.replace(/\d/ig,"*")),i.items.push(t))})})}static toNumber(t){return t.replace(/\D+/ig,"").split("")}static toStandard(t,e){let a=0;return e.replace(/\*/ig,()=>t[a++])}};l(d,"list",[]),l(d,"map",{}),d.makeList(),d.makeMap();let G=d;const u=class u{static get(t,e){return!(t in this.hash)&&e&&this.set(t,e),this.hash[t]}static set(t,e){var i;const a=r.executeFunction(e);a!==((i=this.hash)==null?void 0:i[t])&&(this.hash[t]=a,this.update())}static addWatch(t,e){t in this.watch?this.watch[t].push(e):this.watch={[t]:[e]}}static getLocation(){const t={};return location.hash.replace(/([\w-]+)[:=]([^;]+)/ig,(...e)=>(t[e[1]]=r.transformation(e[2]),"")),t}static update(){this.block=!0;const t=r.forEach(this.hash,(e,a)=>`${a}=${encodeURIComponent(String(e))}`);t.sort(),history.replaceState(null,"",`#${t.join(";")}`),requestAnimationFrame(()=>{this.block=!1})}static reload(){if(!this.block){const t=this.getLocation();this.makeWatch(t),this.hash=t}}static makeWatch(t){r.forEach(this.watch,(e,a)=>{var i;((i=this.hash)==null?void 0:i[a])!==(t==null?void 0:t[a])&&e.forEach(f=>f(t[a]))})}};l(u,"hash",{}),l(u,"watch",{}),l(u,"block",!1),u.reload(),addEventListener("hashchange",()=>u.reload());let m=u;class o{static async get(t){var a;const e=this.getName(t);return e in this.data?this.data[e]:(await this.add(t),((a=this.data)==null?void 0:a[e])??t)}static getSync(t){const e=this.getName(t);return e in this.data?this.data[e]:t}static async getList(t){return new Promise(e=>{const a={};let i=0;for(const f of t)this.get(f).then(p=>{a[f]=p,++i>=t.length&&e(a)})})}static add(t){return new Promise(e=>{this.cache.push(...r.toArray(t)),this.resolveList.push(e),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.timeout=void 0,this.make().then(()=>{this.resolveList.forEach(a=>a()),this.resolveList=[]})},160)})}static getName(t){return`${n.Geo.getLocation()}-${t}`}static async getResponse(){const t=B.Api.isLocalhost()?this.urlLocalhost:this.url,e=await B.Api.response({path:t,request:{list:this.cache}});return(e==null?void 0:e.data)??{}}static async make(){const t=await this.getResponse();this.cache.forEach(e=>{this.data[this.getName(e)]=(t==null?void 0:t[e])??""}),this.cache=[]}}l(o,"url",F.useEnv("apiTranslate")),l(o,"urlLocalhost","translate.json"),l(o,"data",{}),l(o,"cache",[]),l(o,"resolveList",[]),l(o,"timeout");function z(g,t,e){if(g in E)return E[g];const a=new U(g),i=s.ref(a.get(t,e));return s.watch(i,f=>{a.set(f,e)}),E[g]=i,i}const E={};function Y(g,t){if(g in I)return I[g];const e=s.shallowRef(m.get(g,t));return s.watch(e,a=>m.set(g,a)),m.addWatch(g,a=>{e.value=a}),I[g]=e,e}const I={};function $(g,t){if(g in N)return N[g];const e=new T.DataStorage(g,!0),a=s.shallowRef(e.get(t));return s.watch(a,i=>e.set(i)),N[g]=a,a}const N={};function V(g,t,e){if(g in A)return A[g];const a=new T.DataStorage(g),i=s.shallowRef(a.get(t,e));return s.watch(i,f=>a.set(f)),A[g]=i,i}const A={};function J(g){const t=s.shallowRef({});return s.watchEffect(async()=>{y.getLanguage()&&(t.value=await o.getList(g))}),t}exports.Cache=K;exports.CacheStatic=D;exports.Cookie=U;exports.CookieBlock=b;exports.DatetimeRef=H;exports.EventRef=Z;exports.GeoFlag=L;exports.GeoFlagRef=j;exports.GeoIntlRef=x;exports.GeoPhone=G;exports.GeoRef=y;exports.Hash=m;exports.Translate=o;exports.useCookieRef=z;exports.useHashRef=Y;exports.useSessionRef=$;exports.useStorageRef=V;exports.useTranslateRef=J;
