"use strict";var d=Object.defineProperty;var g=(o,t,s)=>t in o?d(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;var a=(o,t,s)=>(g(o,typeof t!="symbol"?t+"":t,s),s);const n=require("./data-DTMqCkcG.cjs"),h=require("./string-DkuGx1HV.cjs"),l=require("./element-sZ6iCo-N.cjs"),e=require("./MutationGlobal-DqatDy6B.cjs");class c{static getKeyUi(){return e.KEY_UI}static getKeyInit(){return e.KEY_INIT}static getKeyEnd(){return e.KEY_END}static getAttributeUi(){return`data-${this.getKeyUi()}`}static getClassInit(){return`${e.CLASS_NAME}--${this.getKeyInit()}`}static getClassEnd(){return`${e.CLASS_NAME}--${this.getKeyEnd()}`}static find(t=document.body,s=e.MutationStatus.new){const i=[];if("querySelector"in t){const r=this.getSelectorByStatus(s);t.querySelector(r)&&t.querySelectorAll(r).forEach(u=>i.push(u))}return i}static closestInit(t){var s,i;return!!((s=t==null?void 0:t.closest)!=null&&s.call(t,this.getSelectorInit())||!((i=t==null?void 0:t.closest)!=null&&i.call(t,"body")))}static getSelectorNew(){return`*[${this.getAttributeUi()}]:not(.${this.getClassInit()}):not(.${this.getClassEnd()})`}static getSelectorInit(){return`*[${this.getAttributeUi()}].${this.getClassInit()}`}static getSelectorEnd(){return`*[${this.getAttributeUi()}].${this.getClassEnd()}`}static getSelectorByStatus(t){switch(t){case e.MutationStatus.init:return`${this.getSelectorInit()}, ${this.getSelectorEnd()}`;case e.MutationStatus.end:return this.getSelectorEnd();default:return this.getSelectorNew()}}}class S{constructor(t){a(this,"id");a(this,"componentName");a(this,"static");a(this,"slots",{});a(this,"props",{});a(this,"callback");var s;this.element=t,this.id=l.getElementId(t),this.componentName=((s=t.dataset)==null?void 0:s[c.getKeyUi()])??"component",this.static=e.MutationStatus.new,this.slots=this.initSlots(),this.setStatus(e.MutationStatus.init)}is(t){return this.element===t}getId(){return this.id}getComponentName(){const t=h.toCamelCaseFirst(this.componentName);return e.MutationGlobal.isComponent(t)?t:h.toCamelCaseFirst(`${e.KEY_NAME}-${this.componentName}`)}getElement(){return this.element}getStatus(){return this.static}getProps(){return{...this.getDataset(),...this.props}}getSlots(){return this.slots}setStatus(t){switch(this.removeClasses(),this.static=t,this.static){case e.MutationStatus.init:this.element.classList.add(c.getClassInit());break;case e.MutationStatus.end:this.element.classList.add(c.getClassEnd());break}return this}registration(t,s){const i=e.MutationGlobal.registrationComponent(this.getId(),t,r=>{n.isFilled(r)&&this.setProps(r).update()});return i&&this.setProps(i),this.callback=s,this}update(){var t;return(t=this.callback)==null||t.call(this,this.getProps()),this}disconnect(){return e.MutationGlobal.removeComponent(this.getId()),this}getDataset(){const t={};return n.forEach(this.element.dataset,(s,i)=>{i!==c.getKeyUi()&&(t[i]=n.transformation(s))}),t}setProps(t){return n.isFilled(t)&&n.forEach(t,(s,i)=>{i==="slots"?this.setSlots(s):this.props[i]=s}),this}setSlots(t){return n.isFilled(t)&&n.forEach(t,(s,i)=>{this.slots[i]=this.initChildrenList(h.toArray(s))}),this}initSlots(){const t={},s=[];for(const i of this.element.children){const r=i.getAttribute("data-slot");if(r)t[r]=this.initChildrenList(i.children);else{const u=this.initChildren(i);u&&("default"in t?t.default.push(u):t.default=[u])}s.push(i)}for(const i of s)this.element.removeChild(i);return t}initChildrenList(t){const s=[];for(const i of t){const r=this.initChildren(i);r&&s.push(r)}return s}initChildren(t){var i,r;if(t instanceof HTMLElement)return{tag:t.nodeName,attributes:{...l.getAttributes(t),innerHTML:(t==null?void 0:t.innerHTML)??""}};const s=(r=(i=t==null?void 0:t.textContent)==null?void 0:i.trim)==null?void 0:r.call(i);if(n.isFilled(s))return s;if(n.isString(t)&&n.isFilled(t))return t}removeClasses(){return this.element.classList.remove(c.getClassInit()),this.element.classList.remove(c.getClassEnd()),this}}exports.MutationCollect=c;exports.MutationDataItem=S;
