"use strict";var p=Object.defineProperty;var M=(h,t,e)=>t in h?p(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var l=(h,t,e)=>(M(h,typeof t!="symbol"?t+"":t,e),e);const b=require("./string-BsLl7qfq.cjs"),y=require("./CacheItem-C85ixkdu.cjs"),d=require("./number-DjaOC1Mo.cjs");function u(h){if(h instanceof Date)return h;if(b.isNull(h))return new Date;if(typeof h=="number")return new Date(h);let t=h,e="";h.replace(/^([\s\S]+)([-+]\d{2}:?\d{2})$/,(s,n,i)=>(t=n,e=i,s));const r=(/^\d{4}\d{2}\d{2}$/.exec(t)&&`${t.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3")}T00:00:00`)??(/^\d{4}\d{2}$/.exec(t)&&`${t.replace(/^(\d{4})(\d{2})$/,"$1-$2")}-01T00:00:00`)??(/^\d{4}-\d{2}-\d{2}$/.exec(t)&&`${t}T00:00:00`)??(/^\d{4}-\d{2}$/.exec(t)&&`${t}-01T00:00:00`)??(/^\d{4}$/.exec(t)&&`${t}-01-01T00:00:00`)??(/^\d{2}:\d{2}$/.exec(t)&&`2000-01-01T${t}:00`)??(/^\d{2}:\d{2}:\d{2}$/.exec(t)&&`2000-01-01T${t}`)??t.replace(" ","T");return new Date(`${r}${e}`)}class v{constructor(t=y.Geo.getLocation()){l(this,"geo");this.geo=y.Geo.find(t);const e=this.getLocation();if(e in m)return m[e];m[e]=this}getLocation(){return this.geo.standard}getFirstDay(){return this.geo.firstDay}display(t,e){let r={type:"language"},s;e&&(typeof e=="string"?r.type=e:r={...r,...e});try{t?s=new Intl.DisplayNames(this.getLocation(),r).of(t):r.type==="language"?s=new Intl.DisplayNames(this.getLocation(),r).of(this.geo.language):r.type==="region"&&(s=new Intl.DisplayNames(this.getLocation(),r).of(this.geo.country))}catch{}return s??t??""}languageName(t,e){const r={type:"language",style:e};return this.display(t,r)}countryName(t,e){const r={type:"region",style:e};return this.display(t,r)}number(t,e){var r,s;return((s=(r=this.numberObject(e))==null?void 0:r.format)==null?void 0:s.call(r,d.toNumber(t)))||t.toString()}decimal(){var t,e,r,s,n;return((n=(s=(r=(e=(t=this.numberObject())==null?void 0:t.formatToParts)==null?void 0:e.call(t,1.2))==null?void 0:r.find)==null?void 0:s.call(r,i=>i.type==="decimal"))==null?void 0:n.value)||"."}currency(t,e,r=!1){const s={style:"currency",currencyDisplay:"symbol",...typeof e=="string"?{currency:e}:e||{}},n=t.toString().replace(/^([\S\s]+[\d ])([a-zA-Z]{3})$/i,(...i)=>(s.currency=i[2].toUpperCase(),i[1]));if(r){const i=this.numberObject(s);return i?i.formatToParts(d.toNumber(t)).filter(o=>["literal","currency"].indexOf(o.type)===-1).join(""):t.toString()}else return this.number(n,s)}unit(t,e){const r={style:"unit",...typeof e=="string"?{unit:e}:e||{}},s=t.toString().replace(/^([\S\s]+[\d ])([a-zA-Z]+)$/i,(...n)=>(r.unit=n[2].toLowerCase(),n[1]));return this.number(s,r)}percent(t,e){return this.number(t,{style:"percent",...e||{}})}percentBy100(t,e){return this.percent(d.toNumber(t)/100,e)}date(t,e,r,s){const n=u(t),i=typeof r=="string",o=this.dateOptions(e,i?r:"short");return s&&(o.hour12=!1),i||Object.assign(o,r),n.toLocaleString(this.getLocation(),o)}relative(t,e,r){const s=u(t),n=r||new Date,i={numeric:"auto",...typeof e=="string"?{style:e}:e||{}};let o="second",a=(s.getTime()-n.getTime())/1e3;Math.abs(a)>=60&&(o="minute",a/=60,Math.abs(a)>=60&&(o="hour",a/=60,Math.abs(a)>=24&&(o="day",a/=24,Math.abs(a)>=30&&(o="month",a/=30,Math.abs(a)>=12&&(o="year",a/=12)))));try{return new Intl.RelativeTimeFormat(this.getLocation(),i).format(Math.round(a),o)}catch{}return""}relativeLimit(t,e,r,s,n,i,o){const a=u(t),c=r||new Date,f=new Date(c),D=new Date(c);return f.setDate(c.getDate()-e),D.setDate(c.getDate()+e),a>=f&&a<=D?this.relative(a,s,c):this.date(a,i,n,o)}month(t,e){try{return Intl.DateTimeFormat(this.getLocation(),{month:e||"long"}).format(u(t))}catch{}return""}months(t){const e=[{label:"",value:void 0}];try{const r=new Date,s=Intl.DateTimeFormat(this.getLocation(),{month:t||"long"});for(let n=0;n<12;n++)r.setMonth(n),e.push({label:s.format(r).replace(/^./,i=>i.toUpperCase()),value:n+1})}catch{}return e}weekday(t,e){try{return Intl.DateTimeFormat(this.getLocation(),{weekday:e||"long"}).format(u(t))}catch{}return""}weekdays(t){const e=[{label:"",value:void 0}];try{const r=new Date,s=Intl.DateTimeFormat(this.getLocation(),{weekday:t||"long"}),n=r.getDay()+(this.geo.firstDay==="Mo"?-1:1);r.setDate(r.getDate()-n);for(let i=0;i<7;i++)e.push({label:s.format(r).replace(/^./,o=>o.toUpperCase()),value:r.getDay()}),r.setDate(r.getDate()+1)}catch{}return e}time(t){return this.date(t,"time")}sort(t,e=(r,s)=>[r,s]){const r=new Intl.Collator(this.getLocation());return t.sort((s,n)=>r.compare(...e(s,n)))}numberObject(t){try{return new Intl.NumberFormat(this.getLocation(),t)}catch{}}dateOptions(t,e="short"){const r={};return["full","datetime","date",void 0,"year-month","year"].indexOf(t)!==-1&&(r.year="numeric"),["full","datetime","date",void 0,"year-month","month"].indexOf(t)!==-1&&(r.month=e),["full","datetime","date",void 0,"day"].indexOf(t)!==-1&&(r.day="2-digit"),t!==void 0&&(["full","datetime","time","hour-minute","hour"].indexOf(t)!==-1&&(r.hour="2-digit"),["full","datetime","time","hour-minute","minute"].indexOf(t)!==-1&&(r.minute="2-digit"),["full","time","second"].indexOf(t)!==-1&&(r.second="2-digit")),r}}const m={};class g{constructor(t,e="date",r=y.Geo.getLocation()){l(this,"date");l(this,"hour24",!1);l(this,"watch");this.type=e,this.code=r,this.date=u(t)}getIntl(){return new v(this.code)}getDate(){return this.date}getType(){return this.type}getHoursType(){const t=this.clone();return t.setHours(23),t.toLocaleTimeString(this.getIntl().getLocation(),{hour:"2-digit"}).match(/23/ig)?"24":"12"}getHour24(){return this.hour24}getTimeZoneOffset(){return this.date.getTimezoneOffset()}getTimeZone(t){const e=this.getTimeZoneOffset();if(t==="minute")return e.toString();const r=e/60*-1;if(t==="hour")return this.getIntl().number(Math.trunc(r),{signDisplay:"always"});const s=this.getIntl().number(Math.trunc(r),{signDisplay:"always",minimumIntegerDigits:2}),n=r.toString().match(/.\d+/)?"30":"00";return t==="RFC"?`${s}${n}`:`${s}:${n}`}getFirstDayCode(){const t=this.getIntl().getFirstDay();return t==="Sa"?6:t==="Su"?0:1}getYear(){return this.date.getFullYear()}getMonth(){return this.date.getMonth()+1}getDay(){return this.date.getDate()}getHour(){return this.date.getHours()}getMinute(){return this.date.getMinutes()}getSecond(){return this.date.getSeconds()}getMaxDay(){return this.getMonth()>0?this.cloneDayLast().getDay():0}locale(t=this.type,e){return this.getIntl().date(this.date,t,e,this.hour24)}localeYear(t="numeric"){return this.locale("year",{year:t})}localeMonth(t="long"){return this.locale("month",{month:t})}localeDay(t="numeric"){return this.locale("day",{day:t})}localeHour(t="numeric"){return this.locale("hour",{hour:t})}localeMinute(t="numeric"){return this.locale("minute",{minute:t})}localeSecond(t="numeric"){return this.locale("second",{second:t})}standard(t=!0){const e=new g(this.date,this.type,"en-GB"),r=[];let s;return e.setHour24(!0),this.type==="hour-minute"?s=e.locale(this.type,{year:"numeric",month:"2-digit",hour12:!1}):(["full","datetime","date","year-month","year","month","day"].indexOf(this.type)!==-1&&(r.push(e.localeYear()),r.push(e.localeMonth("2-digit"))),["full","datetime","date","year","month","day"].indexOf(this.type)!==-1&&r.push(e.localeDay("2-digit")),["full","datetime","time","hour","minute","second"].indexOf(this.type)!==-1&&(s=e.locale("time"))),`${r.join("-")}${s?`T${s}${t?e.getTimeZone():""}`:""}`}setDate(t){return this.date=u(t),this.update(),this}setType(t){return this.type=t,this.update(),this}setHour24(t){return this.hour24=t,this.update(),this}setCode(t){return this.code=t,this}setWatch(t){return this.watch=t,this}setYear(t){return this.date.setFullYear(t),this.update(),this}setMonth(t){return this.date.setMonth(t-1),this.update(),this}setDay(t){return this.date.setDate(t),this.update(),this}setHour(t){return this.date.setHours(t),this.update(),this}setMinute(t){return this.date.setMinutes(t),this.update(),this}setSecond(t){return this.date.setSeconds(t),this.update(),this}moveByYear(t){return this.setYear(this.date.getFullYear()+t),this}moveByMonth(t){return this.setMonth(this.date.getMonth()+1+t),this}moveByDay(t){return this.setDay(this.date.getDate()+t),this}moveByHour(t){return this.setHour(this.date.getHours()+t),this}moveByMinute(t){return this.setMinute(this.date.getMinutes()+t),this}moveBySecond(t){return this.setSecond(this.date.getSeconds()+t),this}moveMonthFirst(){return this.setMonth(1),this}moveMonthLast(){return this.setMonth(12),this}moveMonthNext(){return this.setDay(1).moveByMonth(1),this}moveMonthPrevious(){return this.setDay(1).moveByMonth(-1),this}moveWeekdayFirst(){const t=this.date.getDay(),e=this.getFirstDayCode();return this.moveByDay((e===6?-1:e)-t),this}moveWeekdayLast(){return this.moveWeekdayFirst().moveByDay(6),this}moveWeekdayFirstByMonth(){return this.moveDayFirst().moveWeekdayFirst(),this}moveWeekdayLastByMonth(){return this.moveDayLast().moveWeekdayLast(),this}moveWeekdayNext(){return this.moveWeekdayFirst().moveByDay(7),this}moveWeekdayPrevious(){return this.moveWeekdayFirst().moveByDay(-7),this}moveDayFirst(){return this.setDay(1),this}moveDayLast(){return this.setDay(1).moveByMonth(1).moveByDay(-1),this}moveDayNext(){return this.moveByDay(1),this}moveDayPrevious(){return this.moveByDay(-1),this}clone(){return new Date(this.date)}cloneClass(){return new this.constructor(this.clone(),this.type,this.code)}cloneMonthFirst(){return this.cloneClass().moveMonthFirst()}cloneMonthLast(){return this.cloneClass().moveMonthLast()}cloneMonthNext(){return this.cloneClass().moveMonthNext()}cloneMonthPrevious(){return this.cloneClass().moveMonthPrevious()}cloneWeekdayFirst(){return this.cloneClass().moveWeekdayFirst()}cloneWeekdayLast(){return this.cloneClass().moveWeekdayLast()}cloneWeekdayFirstByMonth(){return this.cloneClass().moveWeekdayFirstByMonth()}cloneWeekdayLastByMonth(){return this.cloneClass().moveWeekdayLastByMonth()}cloneWeekdayNext(){return this.cloneClass().moveWeekdayNext()}cloneWeekdayPrevious(){return this.cloneClass().moveWeekdayPrevious()}cloneDayFirst(){return this.cloneClass().moveDayFirst()}cloneDayLast(){return this.cloneClass().moveDayLast()}cloneDayNext(){return this.cloneClass().moveDayNext()}cloneDayPrevious(){return this.cloneClass().moveDayPrevious()}update(){var t;return(t=this.watch)==null||t.call(this,this.date,this.type,this.hour24),this}}exports.Datetime=g;exports.GeoIntl=v;exports.toDate=u;
